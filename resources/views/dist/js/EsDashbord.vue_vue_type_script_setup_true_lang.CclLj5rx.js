import{d as e,a0 as t,o as s,e as a,f as n,w as c,l,C as o,a7 as d,F as r,g as u,aM as i}from"./index.CeDXPVSD.js";import{E as x,a as m}from"./el-col.BzadnyPt.js";import{E as f}from"./el-card.Cx8qXsER.js";/* empty css               */import{I as p,C as y}from"./es.J2h64tdr.js";import{E as _}from"./index.CWr3KaP0.js";const g={class:"flex-x-between"},v=o("span",{class:"text-[var(--el-text-color-secondary)]"},"总分片数",-1),w={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},b=o("span",null," 主分片数 ",-1),h={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},j=o("span",null," 未分配的分片数 ",-1),C={class:"flex-x-between"},S=o("span",{class:"text-[var(--el-text-color-secondary)]"},"索引数",-1),E={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},z=o("span",null," 文档数 ",-1),N={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},F=o("span",null," 索引所占空间大小 ",-1),I=e({__name:"EsDashbord",setup(e){const I=t({count:{allShared:0,successfulShared:0,index:0,pri:0,unassigned:0,document:0,size:0}});return s((()=>{(async()=>{const e={es_connect:i()},{data:t,code:s,msg:a}=await p(e);0==s&&(I.count.index=t)})(),(async()=>{const e={cat:"CatAllocation",es_connect:i()},{data:t,code:s,msg:a}=await y(e);0==s&&(I.count.size=t[0]["disk.indices"])})(),(async()=>{const e={cat:"CatHealth",es_connect:i()},{data:t,code:s,msg:a}=await y(e);if(0==s&&t.length>0){let e=0,s=0,a=0;for(let n in t){let c=t[n];a+=Number(c.pri),e+=Number(c.shards),s+=Number(c.unassign)}I.count.unassigned=s,I.count.allShared=e,I.count.pri=a}})(),(async()=>{const e={cat:"CatStats",es_connect:i()},{data:t,code:s,msg:a}=await y(e);0==s&&(I.count.document=t.indices.docs.count)})()})),(e,t)=>{const s=_,i=f,p=x,y=m;return a(),n(y,{gutter:10,class:"mt-5"},{default:c((()=>[l(p,{xs:24,sm:12,lg:6},{default:c((()=>[l(i,null,{header:c((()=>[o("div",g,[v,l(s,{type:"primary"},{default:c((()=>[d(r(u(I).count.allShared),1)])),_:1})])])),default:c((()=>[o("div",w,[b,l(s,{type:"success"},{default:c((()=>[d(r(u(I).count.pri),1)])),_:1})]),o("div",h,[j,l(s,{type:"danger"},{default:c((()=>[d(r(u(I).count.unassigned),1)])),_:1})])])),_:1})])),_:1}),l(p,{xs:24,sm:12,lg:6},{default:c((()=>[l(i,null,{header:c((()=>[o("div",C,[S,l(s,{type:"primary"},{default:c((()=>[d(r(u(I).count.index),1)])),_:1})])])),default:c((()=>[o("div",E,[z,l(s,{type:"success"},{default:c((()=>[d(r(u(I).count.document),1)])),_:1})]),o("div",N,[F,l(s,{type:"danger"},{default:c((()=>[d(r(u(I).count.size),1)])),_:1})])])),_:1})])),_:1})])),_:1})}}});export{I as _};
