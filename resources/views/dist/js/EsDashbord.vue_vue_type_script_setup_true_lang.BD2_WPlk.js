import{d as e,a0 as t,o as s,e as a,f as n,w as c,l,C as o,a7 as d,F as r,g as u,aD as i}from"./index.DMBpWXpT.js";import{E as x,a as m}from"./el-col.DOWhjITg.js";import{E as f}from"./el-card.BhvZLWwX.js";/* empty css               */import{I as p,C as y}from"./es.Bcp-0uIV.js";import{E as _}from"./index.qeCV5ckY.js";const g={class:"flex-x-between"},v=o("span",{class:"text-[var(--el-text-color-secondary)]"},"总分片数",-1),h={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},w=o("span",null," 主分片数 ",-1),b={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},j=o("span",null," 未分配的分片数 ",-1),C={class:"flex-x-between"},S=o("span",{class:"text-[var(--el-text-color-secondary)]"},"索引数",-1),E={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},N=o("span",null," 文档数 ",-1),z={class:"flex-x-between mt-2 text-sm text-[var(--el-text-color-secondary)]"},D=o("span",null," 索引所占空间大小 ",-1),k=e({__name:"EsDashbord",setup(e){const k=t({count:{allShared:0,successfulShared:0,index:0,pri:0,unassigned:0,document:0,size:0}});return s((()=>{(async()=>{const e={es_connect:i()},{data:t,code:s,msg:a}=await p(e);0==s&&(k.count.index=t)})(),(async()=>{const e={cat:"CatAllocation",es_connect:i()},{data:t,code:s,msg:a}=await y(e);0==s&&(k.count.size=t[0]["disk.indices"])})(),(async()=>{const e={cat:"CatHealth",es_connect:i()},{data:t,code:s,msg:a}=await y(e);if(0==s&&t.length>0){let e=0,s=0,a=0;for(let n in t){let c=t[n];a+=Number(c.pri),e+=Number(c.shards),s+=Number(c.unassign)}k.count.unassigned=s,k.count.allShared=e,k.count.pri=a}})(),(async()=>{const e={cat:"CatStats",es_connect:i()},{data:t,code:s,msg:a}=await y(e);0==s&&(k.count.document=t.indices.docs.count)})()})),(e,t)=>{const s=_,i=f,p=x,y=m;return a(),n(y,{gutter:10,class:"mt-5"},{default:c((()=>[l(p,{xs:24,sm:12,lg:6},{default:c((()=>[l(i,null,{header:c((()=>[o("div",g,[v,l(s,{type:"primary"},{default:c((()=>[d(r(u(k).count.allShared),1)])),_:1})])])),default:c((()=>[o("div",h,[w,l(s,{type:"success"},{default:c((()=>[d(r(u(k).count.pri),1)])),_:1})]),o("div",b,[j,l(s,{type:"danger"},{default:c((()=>[d(r(u(k).count.unassigned),1)])),_:1})])])),_:1})])),_:1}),l(p,{xs:24,sm:12,lg:6},{default:c((()=>[l(i,null,{header:c((()=>[o("div",C,[S,l(s,{type:"primary"},{default:c((()=>[d(r(u(k).count.index),1)])),_:1})])])),default:c((()=>[o("div",E,[N,l(s,{type:"success"},{default:c((()=>[d(r(u(k).count.document),1)])),_:1})]),o("div",z,[D,l(s,{type:"danger"},{default:c((()=>[d(r(u(k).count.size),1)])),_:1})])])),_:1})])),_:1})])),_:1})}}});export{k as _};
