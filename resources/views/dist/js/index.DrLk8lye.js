import{bC as e,d as a,r as t,a0 as o,o as r,e as l,h as s,C as i,l as p,w as n,g as m,a4 as d,a7 as u,a3 as c,f as g,aB as f,p as h,a5 as j,a6 as b,bc as w}from"./index.DMBpWXpT.js";/* empty css                   */import{E as _}from"./el-card.BhvZLWwX.js";import{_ as v}from"./index.DCoBgS8Y.js";import{E as y,a as k}from"./el-table-column.Dl1jn1Bd.js";import"./el-checkbox.8MJHthul.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-popper.Cb3Eus9m.js";import"./el-scrollbar.BJ_tYB1D.js";/* empty css               */import{E as x,a as U}from"./el-form.DUR-mZNt.js";import{_ as N}from"./refresh.BxJIPU5v.js";import{_ as S}from"./search.DdQbLJWh.js";import"./el-form-item.l0sNRNKZ.js";import"./el-pagination.CQTA1hq1.js";import"./el-select.C9ddzdnq.js";import"./index.qeCV5ckY.js";import"./token.DWNpOE8r.js";import"./strings.DeQ3Zoz4.js";import"./isEqual.B61-3bNT.js";import"./_Uint8Array.BEOPqGcx.js";import"./debounce.l44evi-0.js";import"./index.CP01f_MK.js";import"./castArray.arHVDzqw.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isUndefined.DgmxjSXK.js";const V="/api/v1/logs";class C{static getPage(a){return e({url:`${V}/page`,method:"get",params:a})}static getVisitTrend(a){return e({url:`${V}/visit-trend`,method:"get",params:a})}static getVisitStats(){return e({url:`${V}/visit-stats`,method:"get"})}}const E={class:"app-container"},P={class:"search-container"},$=a({name:"Log",inheritAttrs:!1,__name:"index",setup(e){const a=t(x),V=t(!1),$=t(0),q=o({pageNum:1,pageSize:10,keywords:""}),z=t();function A(){V.value=!0,C.getPage(q).then((e=>{z.value=e.list,$.value=e.total})).finally((()=>{V.value=!1}))}function T(){a.value.resetFields(),q.pageNum=1,A()}return r((()=>{A()})),(e,t)=>{const o=j,r=U,C=S,F=b,K=N,L=x,B=y,D=k,I=v,O=_,Q=w;return l(),s("div",E,[i("div",P,[p(L,{ref_key:"queryFormRef",ref:a,model:m(q),inline:!0},{default:n((()=>[p(r,{prop:"keywords",label:"关键字"},{default:n((()=>[p(o,{modelValue:m(q).keywords,"onUpdate:modelValue":t[0]||(t[0]=e=>m(q).keywords=e),placeholder:"日志内容",clearable:"",onKeyup:d(A,["enter"])},null,8,["modelValue"])])),_:1}),p(r,null,{default:n((()=>[p(F,{type:"primary",onClick:A},{default:n((()=>[p(C),u("搜索")])),_:1}),p(F,{onClick:T},{default:n((()=>[p(K),u("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),p(O,{shadow:"never"},{default:n((()=>[c((l(),g(D,{data:m(z),"highlight-current-row":"",border:""},{default:n((()=>[p(B,{label:"操作时间",prop:"createTime",width:"180"}),p(B,{label:"操作人",prop:"operator",width:"120"}),p(B,{label:"日志模块",prop:"module",width:"100"}),p(B,{label:"日志内容",prop:"content","min-width":"200"}),p(B,{label:"IP 地址",prop:"ip",width:"150"}),p(B,{label:"地区",prop:"region",width:"150"}),p(B,{label:"浏览器",prop:"browser",width:"150"}),p(B,{label:"终端系统",prop:"os",width:"200","show-overflow-tooltip":""}),p(B,{label:"执行时间(ms)",prop:"executionTime",width:"150"})])),_:1},8,["data"])),[[Q,m(V)]]),m($)>0?(l(),g(I,{key:0,total:m($),"onUpdate:total":t[1]||(t[1]=e=>f($)?$.value=e:null),page:m(q).pageNum,"onUpdate:page":t[2]||(t[2]=e=>m(q).pageNum=e),limit:m(q).pageSize,"onUpdate:limit":t[3]||(t[3]=e=>m(q).pageSize=e),onPagination:A},null,8,["total","page","limit"])):h("",!0)])),_:1})])}}});export{$ as default};
