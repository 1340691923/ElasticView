import{d as e,b as a,z as l,al as t,k as s,v as i,x as n,c as o,e as r,h as c,C as u,i as d,g as m,n as p,f as v,w as g,D as f,E as _,p as y,F as b,_ as h,q as k,H as w,aT as D,aU as x,r as j,J as C,l as V,a7 as z,a_ as K,a5 as E,a6 as U,at as I,de as S,j as T,S as B,V as O,b8 as R,a0 as $,b4 as A,bd as M,o as L,a9 as q,aL as P,df as N,dg as F,a3 as J,dh as G,di as H,dj as Z,ce as Q,aZ as W,bi as X,b1 as Y,b2 as ee}from"./index.CLV6ek40.js";import{E as ae}from"./el-loading.BUdDMhkI.js";import{E as le,a as te}from"./el-tab-pane.Bx882FCs.js";import{_ as se,E as ie}from"./index.CmQ0ns9W.js";import{E as ne}from"./el-pagination.D7JQcvSn.js";/* empty css               */import{E as oe,a as re}from"./el-select.Cgog8UO3.js";import"./el-scrollbar.JSBZHDlB.js";import{E as ce}from"./el-popper.DN1O68l_.js";import{E as ue}from"./el-card.BDOdcgEj.js";import{a as de,E as me}from"./el-form.D6tidVci.js";import"./el-form-item.l0sNRNKZ.js";import{b as pe,L as ve,A as ge,U as fe,P as _e,I as ye,S as be,c as he,d as ke}from"./plugins.BzkhgZzC.js";import{E as we}from"./el-dialog.D9BUJkdo.js";import{_ as De}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as xe}from"./index.DHrNonpr.js";import"./use-dialog.B7hCziNn.js";import"./isUndefined.DgmxjSXK.js";import"./strings.CS2wJJ2k.js";import"./index.DXxCJmyx.js";import"./_Uint8Array.DIi5Oa4y.js";import"./refs.QvgRPoko.js";const je=e({name:"ElTimeline",setup(e,{slots:i}){const n=a("timeline");return l("timeline",i),()=>t("ul",{class:[n.b()]},[s(i,"default")])}}),Ce=i({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:n},hollow:Boolean}),Ve=e({name:"ElTimelineItem"});var ze=h(e({...Ve,props:Ce,setup(e){const l=e,t=a("timeline-item"),i=o((()=>[t.e("node"),t.em("node",l.size||""),t.em("node",l.type||""),t.is("hollow",l.hollow)]));return(e,a)=>(r(),c("li",{class:d([m(t).b(),{[m(t).e("center")]:e.center}])},[u("div",{class:d(m(t).e("tail"))},null,2),e.$slots.dot?y("v-if",!0):(r(),c("div",{key:0,class:d(m(i)),style:p({backgroundColor:e.color})},[e.icon?(r(),v(m(_),{key:0,class:d(m(t).e("icon"))},{default:g((()=>[(r(),v(f(e.icon)))])),_:1},8,["class"])):y("v-if",!0)],6)),e.$slots.dot?(r(),c("div",{key:1,class:d(m(t).e("dot"))},[s(e.$slots,"dot")],2)):y("v-if",!0),u("div",{class:d(m(t).e("wrapper"))},[e.hideTimestamp||"top"!==e.placement?y("v-if",!0):(r(),c("div",{key:0,class:d([m(t).e("timestamp"),m(t).is("top")])},b(e.timestamp),3)),u("div",{class:d(m(t).e("content"))},[s(e.$slots,"default")],2),e.hideTimestamp||"bottom"!==e.placement?y("v-if",!0):(r(),c("div",{key:1,class:d([m(t).e("timestamp"),m(t).is("bottom")])},b(e.timestamp),3))],2)],2))}}),[["__file","timeline-item.vue"]]);const Ke=k(je,{TimelineItem:ze}),Ee=w(ze),Ue=u("div",{class:"hint"},"请前往 http://dev.elastic-view.cn 注册账户后拷贝evKey至此并保存",-1),Ie={slot:"footer",class:"dialog-footer"},Se={__name:"index",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:a}){const l=D(),t=o((()=>l.device===x.MOBILE)),s=e,i=a,n=j({evKey:""}),c=j(!1);C((()=>s.visible),(e=>{c.value=e}));const d=()=>{c.value=!1,i("update:visible",!1),n.value.evKey=""},p=async()=>{const e=n.value.evKey;if(!e)return void K.error("请填写 evKey");let a=await pe({ev_key:e});0==a.code?(K.success({type:"success",offset:60,message:"evKey导入成功，请重新进行想要进行的操作"}),d()):K.error({type:"error",offset:60,message:a.msg})};return(e,a)=>{const l=E,s=de,i=me,o=U,f=we;return r(),v(f,{width:m(t)?"100%":"60vw",title:"请填写 evKey",modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),onClose:d},{default:g((()=>[V(i,{model:n.value,ref:"formRef"},{default:g((()=>[V(s,{label:"evKey",prop:"evKey"},{default:g((()=>[V(l,{modelValue:n.value.evKey,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.evKey=e),placeholder:"请输入 evKey"},null,8,["modelValue"]),Ue])),_:1})])),_:1},8,["model"]),u("span",Ie,[V(o,{onClick:d},{default:g((()=>[z("取消")])),_:1}),V(o,{type:"primary",onClick:p},{default:g((()=>[z("保存")])),_:1})])])),_:1},8,["width","modelValue"])}}},Te={class:"comment-item"},Be={class:"comment-header"},Oe={class:"comment-user"},Re={class:"comment-time"},$e={class:"comment-content"},Ae={class:"comment-footer"},Me={class:"comment-actions"},Le={key:0},qe={key:1},Pe={key:0,class:"reply-input-container"},Ne={class:"reply-to-tip"},Fe={class:"emoji-container"},Je={key:0,style:{"z-index":"300000"},class:"emoji-picker"},Ge=["onClick"],He={class:"reply-actions"},Ze={key:1,class:"comment-replies"},Qe=De({__name:"CommentItem",props:{comment:{type:Object,required:!0},pluginId:{type:[Number,String],required:!0},level:{type:Number,default:1}},emits:["refresh"],setup(e,{emit:a}){const l=D(),t=o((()=>l.device===x.MOBILE)),s=e,i=j(!1),n=()=>{i.value=!0},p=a,f=j(!1),h=j(""),k=j(!0),w=j(!1),C=j(!1),$=o((()=>!t.value||s.level<3)),A=async()=>{if(C.value)return;console.log("点赞按钮被点击，评论ID:",s.comment.id),C.value=!0;const e=s.comment.has_like,a=s.comment.like_count;s.comment.has_like?(s.comment.like_count=Math.max(0,s.comment.like_count-1),s.comment.has_like=!1):(s.comment.like_count+=1,s.comment.has_like=!0);try{const l=await ve({comment_id:s.comment.id});if(-1!==l.msg.indexOf("请前往"))return void n();if(0!==l.code)return K.error({type:"error",offset:60,message:l.msg||"操作失败"}),s.comment.has_like=e,void(s.comment.like_count=a)}catch(l){console.error("点赞失败",l),K.error({type:"error",offset:60,message:"点赞失败"}),s.comment.has_like=e,s.comment.like_count=a}finally{C.value=!1}},M=()=>{var e;t.value&&s.level>=2&&(null==(e=s.comment.children)?void 0:e.length)>0?R.alert("请在PC端查看更多嵌套回复","提示",{confirmButtonText:"确定",type:"info"}):k.value=!k.value},L=o((()=>{if(!s.comment.created_at)return"";if(t.value){const e=new Date(s.comment.created_at);return`${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}return s.comment.created_at})),q=()=>{f.value=!0},P=()=>{f.value=!1,h.value=""},N=async()=>{if(h.value.trim())try{const e=await ge({plugin_id:s.pluginId,content:h.value,parent_id:s.comment.id});if(-1!==e.msg.indexOf("请前往"))return void n();if(0!==e.code)return void K.error({type:"error",offset:60,message:e.msg});K.success({type:"success",offset:60,message:"回复成功"}),k.value=!1,P(),p("refresh")}catch(e){console.error("回复失败",e),K.error({type:"error",offset:60,message:"回复失败"})}else K.warning({type:"warning",offset:60,message:"回复内容不能为空"})},F=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","👍","👎","👏","🙏","🤝","💪","❤️","💔","💯","✨","🔥"];return(a,l)=>{const t=_,s=U,n=E,o=I("comment-item",!0);return r(),c("div",Te,[u("div",Be,[u("span",Oe,b(e.comment.realname),1),u("span",Re,b(L.value),1)]),u("div",$e,b(e.comment.content),1),u("div",Ae,[u("div",Me,[V(s,{type:"text",size:"small",class:d(["like-button",{"is-liked":e.comment.has_like}]),onClick:T(A,["stop"])},{default:g((()=>[V(t,null,{default:g((()=>[V(m(S))])),_:1}),u("span",null,b(e.comment.like_count),1)])),_:1},8,["class"]),V(s,{type:"text",size:"small",class:"reply-button",onClick:q},{default:g((()=>[z(" 回复 ")])),_:1}),e.comment.children&&e.comment.children.length>0?(r(),v(s,{key:0,type:"text",size:"small",class:"toggle-button",onClick:M},{default:g((()=>[k.value?(r(),c("span",Le,"展开 ("+b(e.comment.children.length)+"条回复)",1)):(r(),c("span",qe,"收起回复"))])),_:1})):y("",!0)])]),f.value?(r(),c("div",Pe,[u("div",Ne,"回复: "+b(e.comment.realname),1),V(n,{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),type:"textarea",rows:2,placeholder:"发表回复...",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),u("div",Fe,[V(s,{type:"text",size:"small",class:"emoji-toggle",onClick:l[1]||(l[1]=e=>w.value=!w.value)},{default:g((()=>[z(" 😊 表情 ")])),_:1}),w.value?(r(),c("div",Je,[(r(),c(B,null,O(F,(e=>u("div",{key:e,class:"emoji-item",onClick:a=>(e=>{h.value+=e,w.value=!1})(e)},b(e),9,Ge))),64))])):y("",!0)]),u("div",He,[V(s,{size:"small",onClick:P},{default:g((()=>[z("取消")])),_:1}),V(s,{type:"primary",size:"small",onClick:N},{default:g((()=>[z("发送")])),_:1})])])):y("",!0),e.comment.children&&e.comment.children.length>0&&!k.value&&$.value?(r(),c("div",Ze,[(r(!0),c(B,null,O(e.comment.children,(t=>(r(),v(o,{key:t.id,comment:t,"plugin-id":e.pluginId,level:e.level+1,onRefresh:l[2]||(l[2]=e=>a.$emit("refresh"))},null,8,["comment","plugin-id","level"])))),128))])):y("",!0),V(Se,{visible:i.value,"onUpdate:visible":l[3]||(l[3]=e=>i.value=e)},null,8,["visible"])])}}},[["__scopeId","data-v-a4f4d908"]]),We=e=>(Y("data-v-1651eeab"),e=e(),ee(),e),Xe={class:"app-container"},Ye={class:"sort-wrapper"},ea={class:"plugin-container"},aa={class:"plugin-list"},la={class:"plugin-header"},ta=["src"],sa={class:"plugin-title"},ia={class:"plugin-body"},na={class:"plugin-description"},oa={class:"plugin-tags"},ra={class:"plugin-stats"},ca={class:"stat-item"},ua={class:"stat-item"},da={class:"plugin-footer"},ma={class:"publish-time"},pa=We((()=>u("div",{class:"pagination-spacer"},null,-1))),va={class:"pagination-container"},ga={class:"plugin-detail"},fa={class:"detail-header"},_a={class:"header-main"},ya=["src"],ba={class:"info-content"},ha={class:"plugin-title"},ka={class:"plugin-desc"},wa={class:"stat-item"},Da={class:"stat-item"},xa={class:"stat-item"},ja={class:"readme-content"},Ca={class:"version-header"},Va={class:"version-tag"},za={class:"version-actions"},Ka={class:"comments-list"},Ea={key:0,class:"empty-comments"},Ua={key:1,class:"comments-container"},Ia={class:"add-comment-container"},Sa={class:"emoji-container"},Ta={key:0,style:{"z-index":"300000"},class:"emoji-picker"},Ba=["onClick"],Oa={class:"comment-actions"},Ra=We((()=>u("div",{class:"comments-spacer"},null,-1))),$a=De(e({__name:"market",setup(e){const a=D(),l=o((()=>a.device===x.MOBILE)),t=$({visible:!1}),s=A(),i=j(!1),n=j(!1),p=$({count:0,list:[]}),h=$({count:0,list:[]}),k=j("readme");o((()=>({"plugin-box-black":s.theme===M.DARK,"plugin-box-light":s.theme!==M.DARK})));const w=$({search_txt:"",order_by_col:"star_cnt",order_by_desc:!0,has_download_type:null,page:1,limit:10}),C=$({pluginData:{id:0,plugin_alias:"",plugin_name:"",user_id:0,describe:"",plugin_lang:"",readme:"",create_time:"",update_time:"",state:2,logo:"",msg:"",download_cnt:0,star_cnt:0,download_user_cnt:0,buy_coin_num:0},publish_id:0,page:1,limit:10}),I=j(!1),S=()=>{I.value=!0};o((()=>s.theme===M.DARK?"rgb(24, 27, 31)":""));const Y=async()=>{we.value=!0;let e=await fe({plugin_id:C.pluginData.plugin_alias});we.value=!1,0==e.code?(C.pluginData.has_download=!1,K.success({type:"success",offset:60,message:e.msg})):K.error({type:"error",offset:60,message:e.msg})};o((()=>s.theme===M.DARK?"rgb(204, 204, 220)":"black")),o((()=>s.theme===M.DARK?"rgb(122,122,133)":"gray"));const ee=e=>{w.limit=e,ve()},pe=e=>{w.page=e,ve()},ve=async()=>{i.value=!0;const e=await _e(w);i.value=!1,0==e.code?(p.count=e.data.count,p.list=e.data.list):K.error({type:"error",offset:60,message:e.msg})},we=j(!1),De=async e=>{we.value=!0;let a=await ye({plugin_id:C.pluginData.plugin_alias,version:e});var l;(we.value=!1,-1===a.msg.indexOf("请前往"))?0==a.code?(C.pluginData.has_download=!0,-1!==a.msg.indexOf("刷新")?await(l=C.pluginData.plugin_name,void R.confirm(l+"插件安裝成功,是否立即刷新页面?","是否刷新",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{window.location.reload()})).catch((e=>{console.error(e)}))):K.success({type:"success",offset:60,message:a.msg})):K.error({type:"error",offset:60,message:a.msg}):S()},je=async()=>{n.value=!0;const e=await he({page:C.page,limit:C.limit,plugin_id:C.pluginData.id});n.value=!1,0==e.code?(null==e.data.list&&(e.data.list=[]),h.count=e.data.count,h.list=e.data.list):K.error({type:"error",offset:60,message:e.msg})},Ce=()=>{w.order_by_desc=!w.order_by_desc,ve()},Ve=j(!1),ze=()=>{Ve.value=!Ve.value},Ue=j(!1),Ie=j([]),Te=j(""),Be=j(!1);$({showReplyInput:!1,replyToId:0,replyContent:"",replyToName:""});const Oe=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","👍","👎","👏","🙏","🤝","💪","❤️","💔","💯","✨","🔥"],Re=async()=>{Ue.value=!0;try{const e=await ke({plugin_id:C.pluginData.id});if(0!==e.code)return void K.error({type:"error",offset:60,message:e.msg});Ie.value=e.data||[]}catch(e){console.error("获取评论失败",e),K.error({type:"error",offset:60,message:"获取评论失败"})}finally{Ue.value=!1}},$e=async()=>{if(Te.value.trim()){Ue.value=!0;try{const e=await ge({plugin_id:C.pluginData.id,content:Te.value,parent_id:0});if(-1!==e.msg.indexOf("请前往"))return void S();if(0!==e.code)return void K.error({type:"error",offset:60,message:e.msg});K.success({type:"success",offset:60,message:"评论成功"}),Te.value="",Re()}catch(e){console.error("评论失败",e),K.error({type:"error",offset:60,message:"评论失败"})}finally{Ue.value=!1}}else K.warning({type:"warning",offset:60,message:"评论内容不能为空"})},Ae=o((()=>h.list.slice(0,100)));return L((()=>{ve()})),(e,a)=>{const n=_,o=U,D=E,x=de,j=oe,R=re,$=me,A=ce,L=xe,ge=ue,fe=ne,_e=le,ye=Ee,he=Ke,ke=ie,Me=te,Le=ae,qe=X;return r(),c("div",Xe,[m(l)?(r(),c("div",{key:0,class:"mobile-filter-toggle",onClick:ze},[V(o,{type:"primary",class:"toggle-button"},{default:g((()=>[z(b(m(Ve)?"收起筛选":"展开筛选")+" ",1),V(n,{class:d(["toggle-icon",{"is-reverse":m(Ve)}])},{default:g((()=>[V(m(q))])),_:1},8,["class"])])),_:1})])):y("",!0),u("div",{class:d(["search-container",{"is-mobile":m(l),"is-collapsed":m(l)&&!m(Ve)}])},[V($,{inline:!0,class:"search-form"},{default:g((()=>[V(x,{label:""},{default:g((()=>[V(D,{modelValue:m(w).search_txt,"onUpdate:modelValue":a[0]||(a[0]=e=>m(w).search_txt=e),clearable:"",placeholder:"插件名/描述:"},{prefix:g((()=>[V(n,null,{default:g((()=>[V(m(P))])),_:1})])),_:1},8,["modelValue"])])),_:1}),V(x,{label:"排序:"},{default:g((()=>[u("div",Ye,[V(R,{modelValue:m(w).order_by_col,"onUpdate:modelValue":a[1]||(a[1]=e=>m(w).order_by_col=e),class:"custom-select"},{default:g((()=>[V(j,{label:"star次数",value:"star_cnt"}),V(j,{label:"下载人数",value:"download_user_cnt"}),V(j,{label:"下载次数",value:"download_cnt"}),V(j,{label:"最后更新时间",value:"publish_time"})])),_:1},8,["modelValue"]),V(o,{class:"sort-button",type:m(w).order_by_desc?"default":"primary",onClick:Ce},{default:g((()=>[V(n,null,{default:g((()=>[(r(),v(f(m(w).order_by_desc?m(N):m(F))))])),_:1})])),_:1},8,["type"])])])),_:1}),V(x,{label:"安装状态:"},{default:g((()=>[V(R,{modelValue:m(w).has_download_type,"onUpdate:modelValue":a[2]||(a[2]=e=>m(w).has_download_type=e),class:"custom-select"},{default:g((()=>[V(j,{label:"全部",value:null}),V(j,{label:"未安装",value:!1}),V(j,{label:"已安装",value:!0})])),_:1},8,["modelValue"])])),_:1}),V(x,null,{default:g((()=>[V(o,{type:"primary",icon:m(P),class:"search-button",onClick:ve},{default:g((()=>[z(b(e.$t("搜索")),1)])),_:1},8,["icon"])])),_:1})])),_:1})],2),J((r(),c("div",ea,[u("div",aa,[(r(!0),c(B,null,O(m(p).list,((e,a)=>(r(),c("div",{key:e.id,class:"plugin-card-wrapper"},[V(ge,{class:d(["plugin-card",{"is-dark":m(s).theme===m(M).DARK}]),onClick:a=>(async e=>{C.pluginData=e,t.visible=!0,await je(),await Re()})(e),"body-style":{padding:"0"}},{default:g((()=>[u("div",la,[u("img",{src:e.logo,class:"plugin-logo",loading:"lazy"},null,8,ta),u("h3",sa,b(e.plugin_name),1)]),u("div",ia,[u("p",na,[V(A,{content:e.describe,placement:"top"},{default:g((()=>{return[z(b((a=e.describe,l=50,a.length>l?a.slice(0,l)+"...":a)),1)];var a,l})),_:2},1032,["content"])]),u("div",oa,[e.has_download?(r(),v(L,{key:0,type:"success",effect:"light"},{default:g((()=>[z("已安装")])),_:1})):y("",!0),e.buy_coin_num>0?(r(),v(L,{key:1,type:"primary",effect:"light"},{default:g((()=>[z(" 所需ev币: "+b(e.buy_coin_num)+"个 ",1)])),_:2},1024)):(r(),v(L,{key:2,type:"info",effect:"light"},{default:g((()=>[z("免费")])),_:1}))]),u("div",ra,[V(A,{content:"安装次数/人数",placement:"top"},{default:g((()=>[u("div",ca,[V(n,null,{default:g((()=>[V(m(G))])),_:1}),z(" "+b(e.download_cnt)+"/"+b(e.download_user_cnt),1)])])),_:2},1024),V(A,{content:"Star数",placement:"top"},{default:g((()=>[u("div",ua,[V(n,null,{default:g((()=>[V(m(H))])),_:1}),z(" "+b(e.star_cnt),1)])])),_:2},1024)])]),u("div",da,[u("span",ma,b(e.publish_time),1),V(o,{type:1===e.star_state?"primary":"default",icon:1===e.star_state?m(Z):m(H),circle:"",onClick:T((l=>(async(e,a)=>{let l=await be({plugin_id:e.id});if(0!=l.code)return-1!==l.msg.indexOf("请前往")?void S():void K.error({type:"error",offset:60,message:l.msg});let t="star成功";1==e.star_state?(t="取消star成功",p.list[a].star_state=2,p.list[a].star_cnt=p.list[a].star_cnt-1):(p.list[a].star_state=1,p.list[a].star_cnt=p.list[a].star_cnt+1),K.success({type:"success",offset:60,message:t})})(e,a)),["stop"])},null,8,["type","icon","onClick"])])])),_:2},1032,["class","onClick"])])))),128))]),pa])),[[qe,m(i)]]),u("div",va,[V(fe,{"current-page":m(w).page,"onUpdate:currentPage":a[3]||(a[3]=e=>m(w).page=e),"page-size":m(w).limit,"onUpdate:pageSize":a[4]||(a[4]=e=>m(w).limit=e),total:m(p).count,"page-sizes":[10,20,30,50],background:"",layout:m(l)?"pager":"total, sizes, prev, pager, next, jumper",onSizeChange:ee,onCurrentChange:pe},null,8,["current-page","page-size","total","layout"])]),V(Le,{class:"plugin-detail-drawer",modelValue:m(t).visible,"onUpdate:modelValue":a[9]||(a[9]=e=>m(t).visible=e),title:"插件详情",size:(m(l),"100%"),"append-to-body":!0,"with-header":!0},{default:g((()=>[u("div",ga,[J((r(),v(ge,{class:"detail-card"},{default:g((()=>[u("div",fa,[u("div",_a,[u("div",{class:d(["plugin-info",{"plugin-info-mobile":m(l)}])},[u("img",{src:m(C).pluginData.logo,class:"plugin-logo"},null,8,ya),u("div",ba,[u("h1",ha,b(m(C).pluginData.plugin_name),1),u("p",ka,b(m(C).pluginData.describe),1)]),u("div",{class:d(["plugin-actions",{"plugin-actions-mobile":m(l)}])},[m(C).pluginData.has_download?y("",!0):(r(),v(o,{key:0,type:"primary",onClick:a[5]||(a[5]=e=>{var a;return De(null==(a=m(h).list[0])?void 0:a.version)})},{default:g((()=>[z(b(m(l)?"安装":"安装最新版本"),1)])),_:1})),m(C).pluginData.has_download?(r(),v(o,{key:1,type:"danger",onClick:Y},{default:g((()=>[z(" 卸载 ")])),_:1})):y("",!0)],2)],2),u("div",{class:d(["tag-group",{"tag-group-mobile":m(l)}])},[m(C).pluginData.has_download?(r(),v(L,{key:0,type:"success"},{default:g((()=>[z("已安装")])),_:1})):y("",!0),V(L,null,{default:g((()=>[z("开发者: "+b(m(C).pluginData.realname),1)])),_:1}),V(L,{type:m(C).pluginData.buy_coin_num>0?"primary":"info"},{default:g((()=>[z(b(m(C).pluginData.buy_coin_num>0?`所需ev币: ${m(C).pluginData.buy_coin_num}个`:"免费"),1)])),_:1},8,["type"])],2),u("div",{class:d(["stats-group",{"stats-group-mobile":m(l)}])},[u("div",wa,[V(n,null,{default:g((()=>[V(m(G))])),_:1}),u("span",null,"安装: "+b(m(C).pluginData.download_cnt)+"次/"+b(m(C).pluginData.download_user_cnt)+"人",1)]),u("div",Da,[V(n,null,{default:g((()=>[V(m(H))])),_:1}),u("span",null,"Star: "+b(m(C).pluginData.star_cnt),1)]),u("div",xa,[V(n,null,{default:g((()=>[V(m(Q))])),_:1}),u("span",null,"更新时间: "+b(m(C).pluginData.publish_time),1)])],2)])]),V(Me,{modelValue:m(k),"onUpdate:modelValue":a[8]||(a[8]=e=>W(k)?k.value=e:null),class:"detail-tabs"},{default:g((()=>[V(_e,{label:"介绍",name:"readme"},{default:g((()=>[u("div",ja,[V(se,{content:m(C).pluginData.readme},null,8,["content"])])])),_:1}),V(_e,{label:"版本列表",name:"versions"},{default:g((()=>[u("div",{class:d(["version-list",{"version-list-mobile":m(l)}])},[V(he,null,{default:g((()=>[(r(!0),c(B,null,O(m(Ae),((e,a)=>(r(),v(ye,{key:a,timestamp:e.update_time,placement:"top",class:"version-timeline-item"},{default:g((()=>[V(ge,{class:"version-card"},{header:g((()=>[u("div",Ca,[u("span",Va,"v"+b(e.version),1),u("div",za,[V(o,{onClick:T((a=>De(e.version)),["stop"]),type:"warning",icon:m(G),circle:""},null,8,["onClick","icon"])])])])),default:g((()=>[V(se,{content:e.changelog,class:"changelog"},null,8,["content"])])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1})],2)])),_:1}),V(_e,{label:"评论",name:"comments"},{default:g((()=>[J((r(),c("div",Ka,[0===m(Ie).length?(r(),c("div",Ea,[V(ke,{description:"暂无评论"})])):(r(),c("div",Ua,[(r(!0),c(B,null,O(m(Ie),(e=>(r(),v(Qe,{key:e.id,comment:e,"plugin-id":m(C).pluginData.id,onRefresh:Re},null,8,["comment","plugin-id"])))),128))])),u("div",Ia,[V(D,{modelValue:m(Te),"onUpdate:modelValue":a[6]||(a[6]=e=>W(Te)?Te.value=e:null),type:"textarea",rows:3,placeholder:"发表评论...",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),u("div",Sa,[V(o,{type:"text",size:"small",class:"emoji-toggle",onClick:a[7]||(a[7]=e=>Be.value=!m(Be))},{default:g((()=>[z(" 😊 表情 ")])),_:1}),m(Be)?(r(),c("div",Ta,[(r(),c(B,null,O(Oe,(e=>u("div",{key:e,class:"emoji-item",onClick:a=>(e=>{Te.value+=e,Be.value=!1})(e)},b(e),9,Ba))),64))])):y("",!0)]),u("div",Oa,[V(o,{type:"primary",onClick:$e},{default:g((()=>[z("发表评论")])),_:1})])]),Ra])),[[qe,m(Ue)]])])),_:1})])),_:1},8,["modelValue"])])),_:1})),[[qe,m(we)]])])])),_:1},8,["modelValue","size"]),V(Se,{visible:m(I),"onUpdate:visible":a[10]||(a[10]=e=>W(I)?I.value=e:null)},null,8,["visible"])])}}}),[["__scopeId","data-v-1651eeab"]]);export{$a as default};
//# sourceMappingURL=market.DkYVmbKl.js.map
