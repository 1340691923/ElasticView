import{v as e,A as a,ao as l,bK as i,d as s,y as o,b as t,bi as n,bh as r,r as c,c as u,I as v,u as d,J as p,o as f,e as y,h as m,k as g,C as w,F as b,g as h,i as S,S as k,a8 as x,p as z,f as E,w as C,n as I,_ as L,a2 as N,bL as j,N as A,bM as B,a as O,q as $}from"./index.DMBpWXpT.js";import{E as _}from"./el-image-viewer.CSeiPfXQ.js";import{i as M}from"./position.CIWFjaHr.js";const T=e({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:a([String,Object])},previewSrcList:{type:a(Array),default:()=>l([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:a(String)}}),q={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>i(e),close:()=>!0,show:()=>!0},F=["src","loading","crossorigin"],K={key:0},P=s({name:"ElImage",inheritAttrs:!1});const R=$(L(s({...P,props:T,emits:q,setup(e,{emit:a}){const l=e;let i="";const{t:s}=o(),L=t("image"),$=n(),T=r(),q=c(),P=c(!1),R=c(!0),Y=c(!1),D=c(),H=c(),J=v&&"loading"in HTMLImageElement.prototype;let V,G;const Q=u((()=>[L.e("inner"),X.value&&L.e("preview"),R.value&&L.is("loading")])),U=u((()=>$.style)),W=u((()=>{const{fit:e}=l;return v&&e?{objectFit:e}:{}})),X=u((()=>{const{previewSrcList:e}=l;return Array.isArray(e)&&e.length>0})),Z=u((()=>{const{previewSrcList:e,initialIndex:a}=l;let i=a;return a>e.length-1&&(i=0),i})),ee=u((()=>"eager"!==l.loading&&(!J&&"lazy"===l.loading||l.lazy))),ae=()=>{v&&(R.value=!0,P.value=!1,q.value=l.src)};function le(e){R.value=!1,P.value=!1,a("load",e)}function ie(e){R.value=!1,P.value=!0,a("error",e)}function se(){M(D.value,H.value)&&(ae(),ne())}const oe=d(se,200,!0);async function te(){var e;if(!v)return;await N();const{scrollContainer:a}=l;j(a)?H.value=a:A(a)&&""!==a?H.value=null!=(e=document.querySelector(a))?e:void 0:D.value&&(H.value=B(D.value)),H.value&&(V=O(H,"scroll",oe),setTimeout((()=>se()),100))}function ne(){v&&H.value&&oe&&(null==V||V(),H.value=void 0)}function re(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function ce(){X.value&&(G=O("wheel",re,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",Y.value=!0,a("show"))}function ue(){null==G||G(),document.body.style.overflow=i,Y.value=!1,a("close")}function ve(e){a("switch",e)}return p((()=>l.src),(()=>{ee.value?(R.value=!0,P.value=!1,ne(),te()):ae()})),f((()=>{ee.value?te():ae()})),(e,a)=>(y(),m("div",{ref_key:"container",ref:D,class:S([h(L).b(),e.$attrs.class]),style:I(h(U))},[P.value?g(e.$slots,"error",{key:0},(()=>[w("div",{class:S(h(L).e("error"))},b(h(s)("el.image.error")),3)])):(y(),m(k,{key:1},[void 0!==q.value?(y(),m("img",x({key:0},h(T),{src:q.value,loading:e.loading,style:h(W),class:h(Q),crossorigin:e.crossorigin,onClick:ce,onLoad:le,onError:ie}),null,16,F)):z("v-if",!0),R.value?(y(),m("div",{key:1,class:S(h(L).e("wrapper"))},[g(e.$slots,"placeholder",{},(()=>[w("div",{class:S(h(L).e("placeholder"))},null,2)]))],2)):z("v-if",!0)],64)),h(X)?(y(),m(k,{key:2},[Y.value?(y(),E(h(_),{key:0,"z-index":e.zIndex,"initial-index":h(Z),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:ue,onSwitch:ve},{default:C((()=>[e.$slots.viewer?(y(),m("div",K,[g(e.$slots,"viewer")])):z("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):z("v-if",!0)],64)):z("v-if",!0)],6))}}),[["__file","image.vue"]]));export{R as E};
