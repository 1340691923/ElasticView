(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6255"],{9800:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.open,title:e.title.concat("【"+e.indexName+"】"),width:"60%"},on:{"update:visible":function(t){e.open=t},close:e.closeDialog}},[n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[e.showTypeName?n("el-tag",{staticClass:"filter-item"},[e._v("type名：")]):e._e(),e._v(" "),e.showTypeName?n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{readonly:e.typeReadonly},model:{value:e.type_name,callback:function(t){e.type_name=t},expression:"type_name"}}):e._e(),e._v(" "),n("el-tag",{staticClass:"filter-item"},[e._v("dynamic：")]),e._v(" "),n("el-select",{staticClass:"filter-item",attrs:{size:"mini"},model:{value:e.dynamic,callback:function(t){e.dynamic=t},expression:"dynamic"}},[n("el-option",{attrs:{label:e.$t("动态映射"),value:"true"}}),e._v(" "),n("el-option",{attrs:{label:e.$t("静态映射"),value:"false"}}),e._v(" "),n("el-option",{attrs:{label:e.$t("严格映射"),value:"strict"}})],1),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",attrs:{disabled:e.loading,icon:"el-icon-check",type:"success",size:"mini"},on:{click:e.saveMappinng}},[e._v(e._s(e.$t("保存/修改映射"))+"\n        ")])],1),e._v(" "),e.showVueJsonHelper?n("vue-json-helper",{attrs:{size:e.size,names:e.names,"json-str":e.jsonStr,"root-flag":e.rootFlag,"open-flag":e.openFlag,"back-top-flag":e.backTopFlag,"shadow-flag":!1,"border-flag":!1},on:{jsonListener:e.jsonListener}}):e._e()],1)])],1)},s=[],i=(n("1bc7"),n("32ea"),n("e186"),n("c3ae")),r=n("c236"),o={name:"Mapping",components:{VueJsonHelper:function(){return n.e("chunk-391f7afc").then(n.bind(null,"6bf0"))}},props:{indexName:{type:String,default:""},open:{type:Boolean,default:!1},title:{type:String,default:"新增映射结构"}},data:function(){return{loading:!1,dynamic:"false",drawerShow:!1,connectLoading:!1,size:"small",names:[{key:"Root",name:"properties"},{key:"type",name:"数据类型"},{key:"format",name:"时间格式化"},{key:"analyzer",name:"分词器"},{key:"normalizer",name:"分析器"},{key:"boost",name:"权重"},{key:"coerce",name:"强制类型转换"},{key:"copy_to",name:"合并参数"},{key:"doc_values",name:"文档值"},{key:"dynamic",name:"动态设置"},{key:"enabled",name:"是否开启字段"},{key:"fielddata",name:"字段数据"},{key:"ignore_above",name:"字段保存最大长度"},{key:"ignore_malformed",name:"忽略格式不对的数据"},{key:"include_in_all",name:"_all 查询包含字段"},{key:"index_options",name:"索引设置"},{key:"index",name:"是否可以被搜索"},{key:"fields",name:"字段"},{key:"norms",name:"标准信息"},{key:"null_value",name:"空值"},{key:"position_increment_gap",name:"短语位置间隙"},{key:"properties",name:"属性"},{key:"search_analyzer",name:"搜索分析器"},{key:"similarity",name:"匹配算法"},{key:"store",name:"字段是否被存储"},{key:"term_vector",name:"词根信息"}],rootFlag:!0,openFlag:!0,backTopFlag:!1,jsonStr:"{}",showVueJsonHelper:!1,type_name:"",ver:6,showTypeName:!1,typeReadonly:!1}},mounted:function(){this.init()},methods:{saveMappinng:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={},e.prev=1,t=JSON.parse(this.jsonStr),e.next=9;break;case 5:return e.prev=5,e.t0=e["catch"](1),this.$message({type:"error",message:"JSON格式不正确"}),e.abrupt("return");case 9:n={},n["es_connect"]=this.$store.state.baseData.EsConnectID,n["index_name"]=this.indexName,a={},a["properties"]=t,a["dynamic"]=this.dynamic,e.t1=this.ver,e.next=6===e.t1?18:7===e.t1||8===e.t1?21:23;break;case 18:return n["properties"]=a,n["type_name"]=this.type_name,e.abrupt("break",23);case 21:return n["properties"]=a,e.abrupt("break",23);case 23:return this.loading=!0,e.next=26,Object(r["b"])(n);case 26:s=e.sent,s.data,i=s.code,o=s.msg,this.loading=!1,0==i?(this.$message({type:"success",message:o}),this.$emit("finished")):this.$message({type:"error",message:o});case 32:case"end":return e.stop()}}),e,this,[[1,5]])})));function t(){return e.apply(this,arguments)}return t}(),refreshVueJsonHelper:function(){var e=this;this.showVueJsonHelper=!1,this.$nextTick((function(){e.showVueJsonHelper=!0}))},init:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},t["es_connect"]=this.$store.state.baseData.EsConnectID,t["index_name"]=this.indexName,e.next=5,Object(r["a"])(t);case 5:if(n=e.sent,a=n.data,s=n.code,i=n.msg,0==s){e.next=12;break}return this.$message({type:"error",message:i}),e.abrupt("return");case 12:this.ver=a.ver,e.t0=this.ver,e.next=6===e.t0?16:7===e.t0||8===e.t0?20:23;break;case 16:return o=Object.keys(a.list[this.indexName].mappings),this.showTypeName=!0,0==o.length?this.typeReadonly=!1:(this.type_name=o[0],this.typeReadonly=!0,this.dynamic=a.list[this.indexName].mappings[this.type_name].hasOwnProperty("dynamic")?a.list[this.indexName].mappings[this.type_name]["dynamic"]:"false",this.jsonStr=a.list[this.indexName].mappings[this.type_name].hasOwnProperty("properties")?JSON.stringify(a.list[this.indexName].mappings[this.type_name].properties):"{}",this.jsonStr=JSON.stringify(a.list[this.indexName].mappings[this.type_name].properties)),e.abrupt("break",23);case 20:return this.dynamic=a.list[this.indexName].mappings.hasOwnProperty("dynamic")?a.list[this.indexName].mappings["dynamic"]:"false",this.jsonStr=a.list[this.indexName].mappings.hasOwnProperty("properties")?JSON.stringify(a.list[this.indexName].mappings.properties):"{}",e.abrupt("break",23);case 23:this.refreshVueJsonHelper();case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),jsonListener:function(e){this.jsonStr=JSON.stringify(e)},closeDialog:function(){this.$emit("close")}}},l=o,p=n("cba8"),c=Object(p["a"])(l,a,s,!1,null,"8c39af36",null);t["default"]=c.exports}}]);