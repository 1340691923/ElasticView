(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bf85f5a","chunk-2d0c80bf"],{"344f":function(t,e,a){"use strict";a.d(e,"g",(function(){return o})),a.d(e,"h",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return u})),a.d(e,"d",(function(){return p})),a.d(e,"f",(function(){return m})),a.d(e,"i",(function(){return b})),a.d(e,"j",(function(){return f}));var n=a("b775"),r="/api/backUp/";function o(t){return Object(n["a"])({url:r+"SnapshotListAction",method:"post",data:t})}function l(t){return Object(n["a"])({url:r+"SnapshotRepositoryListAction",method:"post",data:t})}function i(t){return Object(n["a"])({url:r+"SnapshotCreateRepositoryAction",method:"post",data:t})}function s(t){return Object(n["a"])({url:r+"SnapshotDeleteRepositoryAction",method:"post",data:t})}function c(t){return Object(n["a"])({url:r+"CleanupeRepositoryAction",method:"post",data:t})}function u(t){return Object(n["a"])({url:r+"CreateSnapshotAction",method:"post",data:t})}function p(t){return Object(n["a"])({url:r+"SnapshotDeleteAction",method:"post",data:t})}function m(t){return Object(n["a"])({url:r+"SnapshotDetailAction",method:"post",data:t})}function b(t){return Object(n["a"])({url:r+"SnapshotRestoreAction",method:"post",data:t})}function f(t){return Object(n["a"])({url:r+"SnapshotStatusAction",method:"post",data:t})}},"52e1":function(t,e,a){"use strict";a.r(e);var n,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.open,title:t.$t("创建快照")},on:{"update:visible":function(e){t.open=e},close:t.closeDialog}},[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{"label-width":"500px","label-position":"left"}},[a("el-form-item",{attrs:{label:t.$t("存储库")}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("请选择存储库")},model:{value:t.form.repositoryName,callback:function(e){t.$set(t.form,"repositoryName",e)},expression:"form.repositoryName"}},t._l(t.repositoryNameList,(function(t,e,n){return a("el-option",{key:n,attrs:{label:e,value:e}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("快照名")}},[a("el-input",{attrs:{placeholder:t.$t("快照名")},model:{value:t.form.snapshotName,callback:function(e){t.$set(t.form,"snapshotName",e)},expression:"form.snapshotName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("需要备份的索引")}},[a("index-select",{attrs:{multiple:!0,"have-all":!0,clearable:!0,placeholder:t.$t("迁移别名到多个索引上")},on:{change:t.changeIndex}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("ignore_unavailable   【把这个选项设置为 true 的时候在创建快照的过程中会忽略不存在的索引,如果没有设置ignore_unavailable，在索引不存在的情况下快照请求将会失败。】")}},[a("el-select",{attrs:{filterable:""},model:{value:t.form.ignore_unavailable,callback:function(e){t.$set(t.form,"ignore_unavailable",e)},expression:"form.ignore_unavailable"}},[a("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),a("el-option",{attrs:{label:t.$t("是"),value:!0}}),t._v(" "),a("el-option",{attrs:{label:t.$t("否"),value:!1}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("include_global_state 【通过设置 include_global_state 为false 能够防止 集群的全局状态被作为快照的一部分存储起来】")}},[a("el-select",{attrs:{filterable:""},model:{value:t.form.include_global_state,callback:function(e){t.$set(t.form,"include_global_state",e)},expression:"form.include_global_state"}},[a("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),a("el-option",{attrs:{label:t.$t("是"),value:!0}}),t._v(" "),a("el-option",{attrs:{label:t.$t("否"),value:!1}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("partial  【如果快照中的1个或多个索引不是全部主分片都可用，就会导致整个创建快照的过程失败。 通过设置 partial 为 true 可以改变这个行为】")}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.form.partial,callback:function(e){t.$set(t.form,"partial",e)},expression:"form.partial"}},[a("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),a("el-option",{attrs:{label:t.$t("是"),value:!0}}),t._v(" "),a("el-option",{attrs:{label:t.$t("否"),value:!1}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("创建方式")}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.form.wait,callback:function(e){t.$set(t.form,"wait",e)},expression:"form.wait"}},[a("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),a("el-option",{attrs:{label:t.$t("异步创建"),value:!0}}),t._v(" "),a("el-option",{attrs:{label:t.$t("同步创建"),value:!1}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:t.closeDialog}},[t._v(t._s(t.$t("取消"))+"\n        ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:t.confirm}},[t._v(t._s(t.$t("确认"))+"\n        ")])],1)],1)],1)],1)},o=[],l=a("1554"),i=(a("e186"),a("c3ae")),s=a("344f"),c=(n={name:"Add",components:{}},Object(l["a"])(n,"components",{IndexSelect:function(){return a.e("chunk-6e9d0f88").then(a.bind(null,"1ef5"))}}),Object(l["a"])(n,"props",{open:{type:Boolean,default:!1},snapshotData:{type:Object,default:null}}),Object(l["a"])(n,"data",(function(){return{isOpen:!1,form:{snapshotName:"",repositoryName:"",indexList:[],ignore_unavailable:null,include_global_state:null,partial:null,wait:null},repositoryNameList:{}}})),Object(l["a"])(n,"computed",{}),Object(l["a"])(n,"created",(function(){this.initRepositoryName()})),Object(l["a"])(n,"methods",{changeIndex:function(t){console.log(t),this.form.indexList=[],this.form.indexList=t},initRepositoryName:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={},e["es_connect"]=this.$store.state.baseData.EsConnectID,t.next=5,Object(s["h"])(e);case 5:if(a=t.sent,n=a.data,r=a.code,o=a.msg,0!=r){t.next=13;break}this.repositoryNameList=n.res,t.next=20;break;case 13:if(199999!=r){t.next=18;break}return this.$notify({title:"Error",dangerouslyUseHTMLString:!0,message:'\n<strong>\n            <i style="color: orange">path.repo没有设置</i><br>\n<i>在elasticsearch.yml 配置文件中配置仓库base目录</i><br>\n<i>添加path.repo: /tmp/tmp (/tmp/tmp 为快照备份所在文件夹, <br><i style="color: orange">注意</i>首先要先创建这个文件夹)</i>\n\n          ',type:"error"}),t.abrupt("return");case 18:return this.$message({type:"error",message:o}),t.abrupt("return");case 20:this.loading=!1;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("close",!1)},confirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form,e["es_connect"]=this.$store.state.baseData.EsConnectID,t.next=4,Object(s["b"])(e);case 4:if(a=t.sent,n=a.code,a.data,r=a.msg,0!=n){t.next=14;break}return this.$emit("close",!0),this.$message({type:"success",message:r}),t.abrupt("return");case 14:return this.$message({type:"error",message:r}),t.abrupt("return");case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}),n),u=c,p=a("cba8"),m=Object(p["a"])(u,r,o,!1,null,"fd60c884",null);e["default"]=m.exports}}]);