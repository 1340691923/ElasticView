(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-468ae93c"],{"344f":function(t,e,n){"use strict";n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return d})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return b}));var a=n("b775"),r="/api/backUp/";function s(t){return Object(a["a"])({url:r+"SnapshotListAction",method:"post",data:t})}function o(t){return Object(a["a"])({url:r+"SnapshotRepositoryListAction",method:"post",data:t})}function i(t){return Object(a["a"])({url:r+"SnapshotCreateRepositoryAction",method:"post",data:t})}function c(t){return Object(a["a"])({url:r+"SnapshotDeleteRepositoryAction",method:"post",data:t})}function l(t){return Object(a["a"])({url:r+"CleanupeRepositoryAction",method:"post",data:t})}function u(t){return Object(a["a"])({url:r+"CreateSnapshotAction",method:"post",data:t})}function p(t){return Object(a["a"])({url:r+"SnapshotDeleteAction",method:"post",data:t})}function d(t){return Object(a["a"])({url:r+"SnapshotDetailAction",method:"post",data:t})}function h(t){return Object(a["a"])({url:r+"SnapshotRestoreAction",method:"post",data:t})}function b(t){return Object(a["a"])({url:r+"SnapshotStatusAction",method:"post",data:t})}},f89a:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{attrs:{clearable:"",filterable:"",multiple:"",placeholder:t.$t("请选择存储库"),loading:t.loading},on:{change:t.search},model:{value:t.snapshotNameList,callback:function(e){t.snapshotNameList=e},expression:"snapshotNameList"}},t._l(t.resData,(function(t,e,a){return n("el-option",{key:a,attrs:{label:e,value:e}})})),1),t._v(" "),n("el-button",{attrs:{size:"mini",type:"warning"},nativeOn:{click:function(e){t.openAddDialog=!0}}},[t._v(t._s(t.$t("新建存储库"))+"\n    ")])],1),t._v(" "),n("el-table",{attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:t.$t("序号"),align:"center",fixed:"",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("存储库名"),prop:"name",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("存储库地址"),prop:"location",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("类型"),prop:"type",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("是否压缩"),prop:"compress",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("分解块大小"),prop:"chunk_size",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("是否只读(默认false)"),prop:"readonly",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("制作快照的速度"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.max_snapshot_bytes_per_sec?n("div",[t._v(t._s(e.row.max_snapshot_bytes_per_sec)+"/s")]):n("div",[t._v("20mb/s")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("快照恢复的速度"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.max_restore_bytes_per_sec?n("div",[t._v(t._s(e.row.max_restore_bytes_per_sec)+"/s")]):n("div",[t._v("20mb/s")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:t.$t("操作"),fixed:"right",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},on:{click:function(n){return t.look(e.row.name)}}},[t._v("\n            "+t._s(t.$t("查看"))+"\n          ")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.updateSnapshotData(e.row)}}},[t._v("\n            "+t._s(t.$t("修改"))+"\n          ")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return t.SnapshotDeleteRepositoryAction(e.row.name)}}},[t._v(t._s(t.$t("删除"))+"\n          ")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return t.CleanupeRepository(e.row.name)}}},[t._v(t._s(t.$t("清理"))+"\n          ")])],1)]}}])})],1),t._v(" "),n("el-drawer",{ref:"drawer",attrs:{title:t.$t("JSON数据"),"before-close":t.drawerHandleClose,visible:t.drawerShow,direction:"rtl","close-on-press-escape":"","destroy-on-close":"",size:"50%"},on:{"update:visible":function(e){t.drawerShow=e}}},[t.drawerShow?n("json-editor",{staticClass:"res-body",attrs:{styles:"width: 100%",read:!0,title:t.$t("JSON数据")},model:{value:JSON.stringify(t.resData[t.name],null,"\t"),callback:function(e){t.$set(JSON,"stringify(resData[name],null, '\t')",e)},expression:"JSON.stringify(resData[name],null, '\\t')"}}):t._e()],1),t._v(" "),t.openAddDialog?n("add",{attrs:{"snapshot-data":t.snapshotData,open:t.openAddDialog},on:{close:t.closeAddDialog}}):t._e()],1)},r=[],s=(n("a450"),n("e186"),n("c3ae")),o=(n("d91d"),n("344f")),i={name:"ResTable",components:{JsonEditor:function(){return Promise.all([n.e("chunk-31af6a17"),n.e("chunk-03b113fc"),n.e("chunk-36ba3740")]).then(n.bind(null,"fa7e"))},Add:function(){return n.e("chunk-74d2ea96").then(n.bind(null,"9f5bf"))}},data:function(){return{snapshotData:null,openAddDialog:!1,loading:!1,snapshotNameList:[],resData:{},name:"",drawerShow:!1,tableData:[],index:0,tableHeader:[]}},created:function(){this.initSnapshotName(),this.search()},methods:{CleanupeRepository:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n["es_connect"]=this.$store.state.baseData.EsConnectID,n["name"]=e,t.next=5,Object(o["a"])(n);case 5:if(a=t.sent,a.data,r=a.code,s=a.msg,0==r){t.next=14;break}return this.$message({type:"error",message:s}),t.abrupt("return");case 14:return this.initSnapshotName(),this.search(),this.$message({type:"success",message:s}),t.abrupt("return");case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),SnapshotDeleteRepositoryAction:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n["es_connect"]=this.$store.state.baseData.EsConnectID,n["name"]=e,t.next=5,Object(o["e"])(n);case 5:if(a=t.sent,a.data,r=a.code,s=a.msg,0==r){t.next=14;break}return this.$message({type:"error",message:s}),t.abrupt("return");case 14:return this.initSnapshotName(),this.search(),this.$message({type:"success",message:s}),t.abrupt("return");case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),updateSnapshotData:function(t){this.snapshotData=t,this.openAddDialog=!0},closeAddDialog:function(t){this.openAddDialog=!1,this.snapshotData=null,t&&(this.initSnapshotName(),this.search())},initSnapshotName:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={},e["es_connect"]=this.$store.state.baseData.EsConnectID,t.next=5,Object(o["h"])(e);case 5:if(n=t.sent,a=n.data,r=n.code,s=n.msg,0!=r){t.next=14;break}this.resData=a.res,this.$notify({title:"成功",dangerouslyUseHTMLString:!0,message:'\n<strong> <b style="color: orange">您设置的path.repo为'.concat(a.pathRepo.join(","),"</b><br></strong>\n          "),type:"success"}),t.next=21;break;case 14:if(199999!=r){t.next=19;break}return this.$notify({title:"Error",dangerouslyUseHTMLString:!0,message:'\n<strong>\n            <i style="color: orange">path.repo没有设置</i><br>\n<i>在elasticsearch.yml 配置文件中配置仓库base目录</i><br>\n<i>添加path.repo: /tmp/tmp (/tmp/tmp 为快照备份所在文件夹, <br><i style="color: orange">注意</i>首先要先创建这个文件夹)</i>\n\n          ',type:"error"}),t.abrupt("return");case 19:return this.$message({type:"error",message:s}),t.abrupt("return");case 21:this.loading=!1;case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),search:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e["es_connect"]=this.$store.state.baseData.EsConnectID,e["snapshot_info_list"]=this.snapshotNameList,e["repository"]="test3",t.next=6,Object(o["h"])(e);case 6:if(n=t.sent,a=n.data,r=n.code,s=n.msg,0==r){t.next=15;break}return this.$message({type:"error",message:s}),t.abrupt("return");case 15:this.tableData=a.list;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openDetail:function(t,e,n){this.name=t.name,this.drawerShow=!0},look:function(t){this.name=t,this.drawerShow=!0},drawerHandleClose:function(t){t()}}},c=i,l=n("cba8"),u=Object(l["a"])(c,a,r,!1,null,"e6d8a062",null);e["default"]=u.exports}}]);