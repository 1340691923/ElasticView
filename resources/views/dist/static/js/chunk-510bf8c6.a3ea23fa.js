(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-510bf8c6"],{"7b93":function(t,e,i){},cee7:function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"e",(function(){return l})),i.d(e,"f",(function(){return c})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return d}));var n=i("b775"),a="/api/es/";function s(t){return Object(n["a"])({url:a+"PingAction",method:"post",data:t})}function r(t){return Object(n["a"])({url:a+"CatAction",method:"post",data:t})}function l(t){return Object(n["a"])({url:a+"RunDslAction",method:"post",transformResponse:[function(t){return jsonlint.parse(t)}],data:t})}function c(t){return Object(n["a"])({url:a+"SqlToDslAction",method:"get",params:t})}function o(t){return Object(n["a"])({url:a+"OptimizeAction",method:"post",transformResponse:[function(t){return jsonlint.parse(t)}],data:t})}function d(t){return Object(n["a"])({url:a+"RecoverCanWrite",method:"post",data:t})}},e56a:function(t,e,i){"use strict";i("7b93")},f1e4:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.connectLoading,expression:"connectLoading"}]},[i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-refresh"},on:{click:t.searchData}},[t._v("刷新\n    ")])],1),t._v(" "),i("el-row",{attrs:{gutter:40}},t._l(t.list,(function(e,n,a){return i("el-col",{key:a,staticClass:"card-panel-col",attrs:{xs:18,sm:18,lg:12}},[i("el-card",{staticClass:"box-card"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"},attrs:{slot:"header"},slot:"header"},[i("span",[i("el-tag",[t._v("节点名:"+t._s(e["name"]))])],1),t._v(" "),i("div",["*"===e.master?i("a-tooltip",{staticStyle:{cursor:"pointer"},attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("主节点")])]),t._v(" "),i("el-tag",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-star-on"}),t._v("主节点")])],2):e["node.role"].includes("m")?i("a-tooltip",{staticStyle:{cursor:"pointer"},attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("主节点候选")])]),t._v(" "),i("el-tag",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-star-off"}),t._v("主节点候选")])],2):t._e(),t._v(" "),e["node.role"].includes("d")?i("a-tooltip",{staticStyle:{cursor:"pointer"},attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("数据节点")])]),t._v(" "),i("el-tag",{attrs:{type:"success"}},[i("i",{staticClass:"el-icon-bank-card"}),t._v("数据节点\n              ")])],2):t._e(),t._v(" "),e["node.role"].includes("i")?i("a-tooltip",{staticStyle:{cursor:"pointer"},attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("预处理节点")])]),t._v(" "),i("el-tag",{attrs:{type:"warning"}},[i("i",{staticClass:"el-icon-postcard"}),t._v("预处理节点\n              ")])],2):t._e(),t._v(" "),"-"===e["node.role"]?i("a-tooltip",{staticStyle:{cursor:"pointer"},attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("\n                  仅协调节点\n                ")])]),t._v(" "),i("el-tag",{attrs:{type:"warning"}},[t._v("\n                仅协调节点\n              ")])],2):t._e()],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[i("div",{staticStyle:{width:"48%","border-bottom":"1px solid white"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("IP地址"))+":\n              ")]),t._v(" "),i("div",[i("el-tag",[t._v(t._s(e.ip))])],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("主节点"))+":\n              ")]),t._v(" "),i("div",[e.master?[i("el-tag",[t._v("yes")])]:e.masterEligible?[i("el-tag",[t._v("eligible")])]:[i("el-tag",[t._v("no")])]],2)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("节点角色"))+":\n              ")]),t._v(" "),i("div",[i("el-tag",[t._v(t._s(e["node.role"]))])],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("负载"))+":\n              ")]),t._v(" "),i("div",[i("el-tag",[t._v("1m:"+t._s(e.load_1m)+" / 5m:"+t._s(e.load_5m)+" / 15m:"+t._s(e.load_15m))])],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("内存"))+":\n              ")]),t._v(" "),i("div",[i("el-tag",[t._v(t._s(e["ram.current"])+"/"+t._s(e["ram.max"]))])],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("堆内存"))+":\n              ")]),t._v(" "),i("div",[i("el-tag",[t._v(t._s(e["heap.current"])+"/ "+t._s(e["heap.max"]))])],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                "+t._s(t.$t("磁盘"))+":\n              ")]),t._v(" "),i("div",[i("el-tag",[t._v(t._s(e["disk.used"])+"/ "+t._s(e["disk.total"]))])],1)])]),t._v(" "),i("div",{staticStyle:{width:"48%","border-bottom":"1px solid white"}},[i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                  "+t._s(t.$t("磁盘空间可用大小"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("el-tag",[t._v("\n                    "+t._s(e["disk.avail"])+"\n                  ")])],1)])]),t._v(" "),i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                  "+t._s(t.$t("分片数"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("el-tag",[t._v(t._s(e["shards"]))])],1)])]),t._v(" "),i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                  "+t._s(t.$t("索引所占空间大小"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("el-tag",[t._v(t._s(e["disk.indices"]))])],1)])]),t._v(" "),i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                  "+t._s(t.$t("CPU"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("progress-bar",{staticStyle:{"margin-right":"1px",background:"white"},attrs:{options:t.getOpt(e.cpu),value:e.cpu}})],1)])]),t._v(" "),i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                  "+t._s(t.$t("内存"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("progress-bar",{staticStyle:{"margin-right":"1px",background:"white"},attrs:{options:t.getOpt(e["ram.percent"]),value:e["ram.percent"]}})],1)])]),t._v(" "),i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",{staticStyle:{"margin-left":"10px"}},[t._v("\n                  "+t._s(t.$t("堆内存"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("progress-bar",{staticStyle:{"margin-right":"1px",background:"white"},attrs:{options:t.getOpt(e["heap.percent"]),value:e["heap.percent"]}})],1)])]),t._v(" "),i("div",{staticStyle:{"min-height":"50px",display:"flex","align-items":"center","text-align":"center",width:"100%"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","min-height":"50px"}},[i("div",[t._v("\n                  "+t._s(t.$t("磁盘"))+":\n                ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"10px"}},[i("progress-bar",{staticStyle:{background:"white"},attrs:{options:t.getOpt(e["disk.used_percent"]),value:e["disk.used_percent"]}})],1)])])])])])],1)})),1)],1)},a=[],s=(i("1bc7"),i("a450"),i("e186"),i("c3ae")),r=(i("e680"),i("cee7")),l={name:"Node",data:function(){return{list:[],connectLoading:!1,options:{text:{color:"#FFFFFF",shadowEnable:!0,shadowColor:"#000000",fontSize:12,fontFamily:"Helvetica",dynamicPosition:!1,hideText:!1},progress:{color:"#ff9800",backgroundColor:"#614215"},layout:{height:15,width:140,verticalTextAlign:61,horizontalTextAlign:43,zeroOffset:0,strokeWidth:30,progressPadding:0,type:"line"}},value:90}},beforeMount:function(){this.searchData()},methods:{getOpt:function(t){var e=Number(t),i=JSON.parse(JSON.stringify(this.options));return e<60?(i.progress.color="#4ad47f",i.progress.backgroundColor="grey"):e>=60&&e<=80?(i.progress.color="#ff9800",i.progress.backgroundColor="grey"):(i.progress.color="red",i.progress.backgroundColor="grey"),i},searchData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,n,a,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.connectLoading=!0,{cat:"Node",es_connect:this.$store.state.baseData.EsConnectID},t.next=4,Object(r["a"])({cat:"Node",es_connect:this.$store.state.baseData.EsConnectID});case 4:return e=t.sent,t.next=7,Object(r["a"])({cat:"CatAllocation",es_connect:this.$store.state.baseData.EsConnectID});case 7:if(i=t.sent,console.log("res2",i),0==e.code){t.next=13;break}return this.$message({type:"error",message:e.msg}),this.connectLoading=!1,t.abrupt("return");case 13:t.t0=regeneratorRuntime.keys(e.data);case 14:if((t.t1=t.t0()).done){t.next=30;break}n=t.t1.value,a=e.data[n],t.t2=regeneratorRuntime.keys(i.data);case 18:if((t.t3=t.t2()).done){t.next=28;break}if(s=t.t3.value,l=i.data[s],l["node"]!=a["name"]){t.next=26;break}return e.data[n]["disk.indices"]=l["disk.indices"],e.data[n]["shards"]=l["shards"],e.data[n]["disk.avail"]=l["disk.avail"],t.abrupt("break",28);case 26:t.next=18;break;case 28:t.next=14;break;case 30:console.log("res2",e.data),this.list=e.data,this.connectLoading=!1;case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},c=l,o=(i("e56a"),i("cba8")),d=Object(o["a"])(c,n,a,!1,null,"0508b79e",null);e["default"]=d.exports}}]);