(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7313252"],{"0ee8":function(e,t,n){},"157c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item width150",attrs:{id:"index-health-status",clearable:"",filterable:""},on:{change:e.search},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[n("el-option",{attrs:{label:e.$t("索引健康状态"),value:""}}),e._v(" "),n("el-option",{attrs:{label:"green",value:"green"}}),e._v(" "),n("el-option",{attrs:{label:"yellow",value:"yellow"}}),e._v(" "),n("el-option",{attrs:{label:"red",value:"red"}})],1),e._v(" "),n("el-tag",{staticClass:"filter-item"},[e._v(e._s(e.$t("请输入关键词")))]),e._v(" "),n("el-autocomplete",{staticClass:"filter-item width300",attrs:{id:"index-keyword",clearable:"","fetch-suggestions":e.querySearch,placeholder:e.$t("请输入索引名")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.value))])]}}]),model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[n("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",id:"index-search",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v(e._s(e.$t("搜索"))+"\n      ")]),e._v(" "),n("el-button-group",[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",id:"new-index",type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.openSettingDialog("","add")}}},[e._v(e._s(e.$t("新建索引"))+"\n        ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.readOnlyAllowDeleteLoading,expression:"readOnlyAllowDeleteLoading"}],staticClass:"filter-item",attrs:{size:"mini",disabled:e.readOnlyAllowDeleteLoading,id:"readOnlyAllowDelete",type:"warning",icon:"el-icon-sort"},on:{click:function(t){return e.readOnlyAllowDelete()}}},[e._v("\n          "+e._s(e.$t("将节点切换为可读写状态"))+"\n        ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_flush"],expression:"loadingGroup['_flush']"}],staticClass:"filter-item",attrs:{size:"mini",disabled:e.loadingGroup["_flush"],id:"flushIndex",type:"info",icon:"el-icon-s-open"},on:{click:function(t){return e.runCommandByIndex("_flush","")}}},[e._v(e._s(e.$t("将所有索引刷新到磁盘"))+"\n        ")])],1)],1),e._v(" "),n("div",{staticClass:"filter-container",attrs:{id:"patch-operate"}},[n("el-button-group",[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["close"],expression:"loadingGroup['close']"}],staticClass:"filter-item",attrs:{size:"mini",disabled:e.loadingGroup["close"],id:"patchCloseIndex",type:"danger",icon:"el-icon-circle-close"},on:{click:function(t){e.runCommandByIndex("close",e.selectIndexList.join(","))}}},[e._v(e._s(e.$t("关闭"))+"\n        ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["open"],expression:"loadingGroup['open']"}],staticClass:"filter-item",attrs:{size:"mini",id:"patchOpenIndex",disabled:e.loadingGroup["open"],type:"success",icon:"el-icon-success"},on:{click:function(t){e.runCommandByIndex("open",e.selectIndexList.join(","))}}},[e._v(e._s(e.$t("打开"))+"\n        ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_forcemerge"],expression:"loadingGroup['_forcemerge']"}],staticClass:"filter-item",attrs:{size:"mini",id:"patchForcemergeIndex",disabled:e.loadingGroup["_forcemerge"],icon:"el-icon-connection"},on:{click:function(t){e.runCommandByIndex("_forcemerge",e.selectIndexList.join(","))}}},[e._v(e._s(e.$t("强制合并索引"))+"\n        ")]),e._v(" "),n("el-popover",{attrs:{placement:"top-start",title:e.$t("提示"),width:"200",trigger:"hover",content:e.$t("为了让最新的数据可以立即被搜索到")}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_refresh"],expression:"loadingGroup['_refresh']"}],staticClass:"filter-item",attrs:{slot:"reference",size:"mini",id:"patchRefreshIndex",disabled:e.loadingGroup["_refresh"],type:"primary",icon:"el-icon-refresh"},on:{click:function(t){e.runCommandByIndex("_refresh",e.selectIndexList.join(","))}},slot:"reference"},[e._v(e._s(e.$t("刷新索引"))+"\n          ")])],1),e._v(" "),n("el-popover",{attrs:{placement:"top-start",title:e.$t("提示"),width:"200",trigger:"hover",content:e.$t("让数据持久化到磁盘中")}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_flush"],expression:"loadingGroup['_flush']"}],staticClass:"filter-item",attrs:{slot:"reference",size:"mini",id:"patchFlushIndex",disabled:e.loadingGroup["_flush"],type:"info",icon:"el-icon-s-open"},on:{click:function(t){e.runCommandByIndex("_flush",e.selectIndexList.join(","))}},slot:"reference"},[e._v(e._s(e.$t("将索引刷新到磁盘"))+"\n          ")])],1),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_cache/clear"],expression:"loadingGroup['_cache/clear']"}],staticClass:"filter-item",attrs:{size:"mini",id:"patchCacheClear",disabled:e.loadingGroup["_cache/clear"],type:"warning",icon:"el-icon-toilet-paper"},on:{click:function(t){e.runCommandByIndex("_cache/clear",e.selectIndexList.join(","))}}},[e._v(e._s(e.$t("清理缓存"))+"\n        ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["deleteIndex"],expression:"loadingGroup['deleteIndex']"}],staticClass:"filter-item",attrs:{size:"mini",id:"patchDeleteIndex",disabled:e.loadingGroup["deleteIndex"],type:"danger",icon:"el-icon-delete"},on:{click:function(t){e.deleteIndex(e.selectIndexList.join(","),"deleteIndex")}}},[e._v(e._s(e.$t("删除索引"))+"\n        ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["empty"],expression:"loadingGroup['empty']"}],staticClass:"filter-item",attrs:{size:"mini",id:"patchEmptyIndex",disabled:e.loadingGroup["empty"],type:"danger",icon:"el-icon-delete"},on:{click:function(t){e.runCommandByIndex("empty",e.selectIndexList.join(","))}}},[e._v(e._s(e.$t("清空索引"))+"\n        ")])],1)],1),e._v(" "),n("back-to-top"),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.connectLoading,expression:"connectLoading"}],attrs:{data:e.list},on:{"selection-change":e.selectChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("序号"),align:"center",fixed:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.$index+1)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引健康状态"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["green"==t.row.health?n("el-button",{attrs:{size:"mini",type:"success",circle:""}}):e._e(),e._v(" "),"yellow"==t.row.health?n("el-button",{attrs:{size:"mini",type:"warning",circle:""}}):e._e(),e._v(" "),"red"==t.row.health?n("el-button",{attrs:{size:"mini",type:"danger",circle:""}}):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引的开启状态"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"open"==t.row.status,expression:"scope.row.status == 'open'"}],attrs:{type:"success",size:"mini",icon:"el-icon-success"},on:{click:function(n){return e.runCommandByIndex("close",t.row.index)}}},[e._v(e._s(e.$t("开启"))+"\n          ")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"close"==t.row.status,expression:"scope.row.status == 'close'"}],attrs:{type:"danger",size:"mini",icon:"el-icon-circle-close"},on:{click:function(n){return e.runCommandByIndex("open",t.row.index)}}},[e._v(e._s(e.$t("关闭"))+"\n          ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引名称"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.index)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引uuid"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.uuid)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引主分片数"),width:"80",prop:"pri",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.pri)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引副本分片数量"),width:"80",prop:"rep",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.rep)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引文档总数"),width:"80",prop:"docs->count",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.bigNumberTransform(t.row["docs.count"]))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("索引中删除状态的文档"),width:"80",prop:"docs->deleted",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row["docs.deleted"])+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("主分片+副本分分片的大小"),width:"120",prop:"store->size",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row["store.size"])+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("主分片的大小"),width:"150",prop:"pri->store->size",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row["pri.store.size"])+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("操作"),fixed:"right",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-setting"},on:{click:function(n){return e.openSettingDialog(t.row.index,"update")}}},[e._v(e._s(e.$t("修改配置"))+"\n            ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:function(n){return e.openMappingEditDialog(t.row.index,!1)}}},[e._v(e._s(e.$t("修改映射"))+"\n            ")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-more",type:"primary",size:"mini"},on:{click:function(n){return e.openDrawer(t.row.index)}}},[e._v(e._s(e.$t("更多"))+"\n            ")])],1)]}}])})],1),e._v(" "),e.pageshow?n("el-pagination",{staticClass:"pagination-container",attrs:{"current-page":e.page,"page-sizes":[10,20,30,50,100,150,200,500,1e3],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),n("el-drawer",{ref:"drawer",attrs:{title:e.indexName,"before-close":e.drawerHandleClose,visible:e.drawerShow,direction:"rtl","custom-class":"demo-drawer","close-on-press-escape":"","destroy-on-close":"",size:"50%"},on:{"update:visible":function(t){e.drawerShow=t}}},[n("el-tabs",{staticClass:"margin-left-10",on:{"tab-click":e.changeTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:e.$t("设置"),name:"Settings"}},["Settings"==e.activeName?n("json-editor",{attrs:{styles:"width: 100%",read:!0,title:e.$t("设置")},model:{value:e.activeData,callback:function(t){e.activeData=t},expression:"activeData"}}):e._e()],1),e._v(" "),n("el-tab-pane",{attrs:{label:e.$t("映射"),name:"Mapping"}},[n("div",{staticClass:"filter-container operate"},[n("el-tag",{staticClass:"filter-item",attrs:{type:"warning"}},[e._v(e._s(e.$t("切换为其它索引的映射")))]),e._v(" "),n("index-select",{staticClass:"filter-item",attrs:{clearable:!0,placeholder:e.$t("请选择索引名")},on:{change:e.changeMapToAnotherIndex}}),e._v(" "),n("el-tag",{staticClass:"filter-item",attrs:{type:"primary"}},[e._v(e._s(e.$t("操作")))]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["saveMappinng"],expression:"loadingGroup['saveMappinng']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["saveMappinng"],size:"mini",type:"primary",icon:"el-icon-check"},on:{click:e.saveMappinng}},[e._v(e._s(e.$t("修改"))+"\n            ")]),e._v(" "),n("el-link",{attrs:{type:"danger"}},[e._v(e._s(e.$t("【注意：只能新增映射字段不可修改映射字段类型】")))])],1),e._v(" "),"Mapping"==e.activeName?n("json-editor",{attrs:{styles:"width: 100%",read:!1,title:e.$t("映射")},on:{getValue:e.getMapping},model:{value:e.activeData,callback:function(t){e.activeData=t},expression:"activeData"}}):e._e()],1),e._v(" "),n("el-tab-pane",{attrs:{label:"Stats",name:"Stats"}},["Stats"==e.activeName?n("json-editor",{attrs:{styles:"width: 100%;",read:!0,title:"Stats"},model:{value:e.activeData,callback:function(t){e.activeData=t},expression:"activeData"}}):e._e()],1),e._v(" "),n("el-tab-pane",{attrs:{label:e.$t("编辑索引配置"),name:"editSettings"}},[n("el-form",[n("el-form-item",{attrs:{label:e.$t("编辑索引配置")}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:function(t){return e.submitSettings()}}},[e._v(e._s(e.$t("提交"))+"\n              ")]),e._v(" "),n("el-button",{attrs:{size:"mini",icon:"refresh"},on:{click:e.resetSettings}},[e._v(e._s(e.$t("重置"))+"\n              ")])],1),e._v(" "),n("el-form-item",["editSettings"==e.activeName?n("json-editor",{attrs:{"point-out":e.pointOut,styles:"width: 100%;",read:!1,title:e.$t("编辑配置")},on:{getValue:e.getSettings},model:{value:e.activeData,callback:function(t){e.activeData=t},expression:"activeData"}}):e._e()],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:e.$t("修改别名"),name:"alias"}},["alias"==e.activeName?n("alias",{attrs:{"index-name":e.indexName}}):e._e()],1),e._v(" "),n("div",{staticClass:"filter-container operate"},[n("el-tag",{staticClass:"filter-item"},[e._v(e._s(e.$t("操作")))]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["close"],expression:"loadingGroup['close']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["close"],type:"danger",size:"mini",icon:"el-icon-circle-close"},on:{click:function(t){return e.runCommandByIndex("close",e.indexName)}}},[e._v(e._s(e.$t("关闭"))+"\n          ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["open"],expression:"loadingGroup['open']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["open"],type:"success",size:"mini",icon:"el-icon-success"},on:{click:function(t){return e.runCommandByIndex("open",e.indexName)}}},[e._v(e._s(e.$t("打开"))+"\n          ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_forcemerge"],expression:"loadingGroup['_forcemerge']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["_forcemerge"],size:"mini",icon:"el-icon-connection"},on:{click:function(t){return e.runCommandByIndex("_forcemerge",e.indexName)}}},[e._v(e._s(e.$t("强制合并索引"))+"\n          ")]),e._v(" "),n("el-link",{attrs:{type:"danger"}},[e._v(e._s(e.$t("【forcemerge操作,手动释放磁盘空间】")))]),e._v(" "),n("el-popover",{attrs:{placement:"top-start",title:e.$t("提示"),width:"200",trigger:"hover",content:e.$t("为了让最新的数据可以立即被搜索到")}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_refresh"],expression:"loadingGroup['_refresh']"}],staticClass:"filter-item",attrs:{slot:"reference",disabled:e.loadingGroup["_refresh"],size:"mini",type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.runCommandByIndex("_refresh",e.indexName)}},slot:"reference"},[e._v(e._s(e.$t("刷新索引"))+"\n            ")])],1),e._v(" "),n("el-popover",{attrs:{placement:"top-start",title:e.$t("提示"),width:"200",trigger:"hover",content:e.$t("让数据持久化到磁盘中")}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_flush"],expression:"loadingGroup['_flush']"}],staticClass:"filter-item",attrs:{slot:"reference",disabled:e.loadingGroup["_flush"],size:"mini",type:"info",icon:"el-icon-s-open"},on:{click:function(t){return e.runCommandByIndex("_flush",e.indexName)}},slot:"reference"},[e._v(e._s(e.$t("将索引刷新到磁盘"))+"\n            ")])],1),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["_cache/clear"],expression:"loadingGroup['_cache/clear']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["_cache/clear"],size:"mini",type:"warning",icon:"el-icon-toilet-paper"},on:{click:function(t){return e.runCommandByIndex("_cache/clear",e.indexName)}}},[e._v(e._s(e.$t("清理缓存"))+"\n          ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["deleteIndex"],expression:"loadingGroup['deleteIndex']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["deleteIndex"],type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteIndex(e.indexName,"deleteIndex")}}},[e._v(e._s(e.$t("删除索引"))+"\n          ")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingGroup["empty"],expression:"loadingGroup['empty']"}],staticClass:"filter-item",attrs:{disabled:e.loadingGroup["empty"],type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.runCommandByIndex("empty",e.indexName)}}},[e._v(e._s(e.$t("清空索引"))+"\n          ")])],1)],1)],1),e._v(" "),e.openSettings?n("settings",{attrs:{"index-name":e.indexName,"settings-type":e.settingsType,open:e.openSettings},on:{finished:e.search,close:e.closeSettings}}):e._e(),e._v(" "),e.openMappings?n("mappings",{attrs:{"index-name":e.indexName,title:e.mappingTitle,open:e.openMappings},on:{close:e.closeMappings}}):e._e()],1)},a=[],r=(n("9f60"),n("94f0"),n("0c84"),n("2843"),n("a450"),n("fc02"),n("d91d"),n("4057"),n("1bc7"),n("32ea"),n("e186"),n("c3ae")),s=n("e71d"),o=n("cd3f"),c=n.n(o),l=(n("11dd"),[{element:"#index-health-status",popover:{title:"选择索引健康状态",description:"提供有 green，yellow，red 三种状态筛选"}},{element:"#index-keyword",popover:{title:"在这里可进行关键词筛选",description:"可输入索引名，索引id等关键词 进行筛选"}},{element:"#index-search",popover:{title:"刷新索引列表",description:"点击这个按钮用来刷新索引列表"}},{element:"#new-index",popover:{title:"新建索引",description:"用户可点击此来打开新建索引界面"}},{element:"#readOnlyAllowDelete",popover:{title:"将所有索引状态变为可写状态",description:"由于一些不可抗的因素，例如磁盘空间满了，ES会采取保护机制，将所有索引变为只读状态，需要用户手动将所有索引状态变为可写状态"}},{element:"#flushIndex",popover:{title:"flush刷新操作",description:"flush刷新操作：确保原来只保留在事务日志（transaction log）中的数据，得以真正的保存到Lucene索引中"}},{element:"#patch-operate",popover:{title:"批量操作",description:"这个区域的按钮需要配合表数据前的多选框进行批量操作（例如批量关闭索引）"}},{element:"#patchCloseIndex",popover:{title:"批量关闭索引",description:"索引处于open状态，就会占用内存+磁盘，如果将索引close，就只会占用磁盘"}},{element:"#patchOpenIndex",popover:{title:"批量开启索引",description:"索引关闭后， 对集群的相关开销基本降低为 0，但是无法被读取和搜索，当需要的时候， 可以重新打开，索引恢复正常"}},{element:"#patchForcemergeIndex",popover:{title:"批量强制合并索引",description:"forcemerge操作,手动释放磁盘空间，用于删除文档后，进行合并索引操作，清理磁盘"}},{element:"#patchRefreshIndex",popover:{title:"批量刷新索引",description:"提高ES的实时性，使添加文档尽可能快的被搜索到，同时又避免频繁fsync带来性能开销"}},{element:"#patchFlushIndex",popover:{title:"批量flush索引",description:"将os cache的索引文件(segment file)持久化到磁盘"}},{element:"#patchCacheClear",popover:{title:"批量清除缓存",description:"批量清除缓存"}},{element:"#patchDeleteIndex",popover:{title:"批量删除索引",description:"不同于删除文档操作，删除索引后磁盘空间将会立即释放"}}]),u=l,d=n("ed08"),p=n("cc06"),m=n("cee7");function g(e){var t=["","",""],n=1e3,i=3;while(e/n>=1)n*=10,i+=1;if(i<=4)t[1]="千",t[0]=parseInt(e/1e3)+"";else if(i<=8){var a=parseInt(i-4)/3>1?"千万":"万",r="万"===a?1e4:1e7;t[1]=a,t[0]=e/r+""}else if(i<=16){var s=(i-8)/3>1?"千亿":"亿";s=(i-8)/4>1?"万亿":s,s=(i-8)/7>1?"千万亿":s;var o=1;"亿"===s?o=1e8:"千亿"===s?o=1e11:"万亿"===s?o=1e12:"千万亿"===s&&(o=1e15),t[1]=s,t[0]=parseInt(e/o)+""}return e<1e3&&(t[1]="",t[0]=e+""),t.join("")}var f=n("b89e"),h=n("2209"),v=n("c236");function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function b(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y={name:"indices",components:{Settings:function(){return n.e("chunk-2d222908").then(n.bind(null,"cec3"))},Mappings:function(){return n.e("chunk-2d0e6255").then(n.bind(null,"9800"))},BackToTop:function(){return n.e("chunk-60a93920").then(n.bind(null,"0625"))},JsonEditor:function(){return Promise.all([n.e("chunk-31af6a17"),n.e("chunk-03b113fc"),n.e("chunk-36ba3740")]).then(n.bind(null,"fa7e"))},Alias:function(){return n.e("chunk-2d0cfec2").then(n.bind(null,"667c"))},IndexSelect:function(){return n.e("chunk-2d0b6ed9").then(n.bind(null,"1ef5"))}},data:function(){return{indexTishiList:[],modName:"索引管理",aliasList:[],pointOut:h["d"],settings:{},readOnlyAllowDeleteLoading:!1,loadingGroup:{close:!1,open:!1,_forcemerge:!1,_refresh:!1,_flush:!1,"_cache/clear":!1,deleteIndex:!1,"_all/_flush":!1,saveMappinng:!1},forceMergeLoading:!1,tabLoading:!1,activeData:"{}",activeName:"Settings",drawerShow:!1,settingsType:"add",mappingTitle:"",indexName:"",openSettings:!1,total:0,connectLoading:!1,page:1,limit:10,pageshow:!0,list:[],input:"",status:"",mappings:{},selectIndexList:[],openMappings:!1,allList:[],max:8}},destroyed:function(){sessionStorage.setItem("CatIndices",this.input)},mounted:function(){var e=sessionStorage.getItem("CatIndices");null!=e&&(this.input=e),this.startGuid(),this.GetMapAction(),this.searchData()},methods:{openMappingDialog:function(e){this.indexName=e,this.openMappings=!0},finishGuid:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({guid_name:this.modName});case 2:t=e.sent,t.data,t.code,t.msg;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),startGuid:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["b"])({guid_name:this.modName});case 2:t=e.sent,n=t.data,t.code,t.msg,n||(console.log("开始新手引导"),this.driver=new c.a({className:"scoped-class",animate:!0,opacity:.75,padding:10,allowClose:!1,overlayClickNext:!1,doneBtnText:"完成",closeBtnText:"关闭",nextBtnText:"下一步",prevBtnText:"上一步",onNext:function(e){}}),setTimeout((function(){i.driver.defineSteps(u),i.driver.start(),i.finishGuid()}),500));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectChange:function(e){this.selectIndexList=[];var t,n=_(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.selectIndexList.push(i.index)}}catch(a){n.e(a)}finally{n.f()}},changeMapToAnotherIndex:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return""==t&&(t=this.indexName),n={},n["es_connect"]=this.$store.state.baseData.EsConnectID,n["index_name"]=t,e.next=6,Object(v["a"])(n);case 6:i=e.sent,0==i.code&&(this.activeData=JSON.stringify(i.data["list"][t].mappings,null,"\t"));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMapping:function(e){this.activeData=e},saveMappinng:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(d["b"])(this.activeData),e.prev=1,t=JSON.parse(t),e.next=9;break;case 5:return e.prev=5,e.t0=e["catch"](1),this.$message({type:"error",message:"JSON格式不正确"}),e.abrupt("return");case 9:if(n=Object.keys(t),0!=n.length){e.next=13;break}return this.$message({type:"error",message:"请按格式写type名字"}),e.abrupt("return");case 13:return i={},i["es_connect"]=this.$store.state.baseData.EsConnectID,i["index_name"]=this.indexName,"false"!=t[n[0]].toString()?(i["properties"]=t[n[0]],i["type_name"]=n[0]):i["properties"]=t,this.loadingGroup["saveMappinng"]=!0,e.next=20,Object(v["b"])(i);case 20:a=e.sent,a.data,r=a.code,s=a.msg,this.loadingGroup["saveMappinng"]=!1,0==r?this.$message({type:"success",message:s}):this.$message({type:"error",message:s});case 26:case"end":return e.stop()}}),e,this,[[1,5]])})));function t(){return e.apply(this,arguments)}return t}(),openMappingEditDialog:function(e,t){this.mappingTitle=t?this.$t("新增字段"):this.$t("新增映射结构"),this.indexName=e,this.openMappings=!0},GetMapAction:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},t["es_connect"]=this.$store.state.baseData.EsConnectID,e.next=4,Object(v["a"])(t);case 4:if(n=e.sent,i=n.code,a=n.data,r=n.msg,0!=i){e.next=12;break}this.mappings=a["list"],e.next=14;break;case 12:return this.$message({type:"error",message:r}),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitSettings:function(){var e=this,t={};t["es_connect"]=this.$store.state.baseData.EsConnectID;try{t["settings"]=JSON.parse(this.activeData)}catch(i){return console.log(i),void this.$message({type:"error",message:"JSON 解析异常"})}t["index_name"]=this.indexName,t["types"]="update";var n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(f["b"])(t).then((function(t){0==t.code||200==t.code?(e.$message({type:"success",message:t.msg}),e.search()):e.$message({type:"error",message:t.msg}),n.close()})).catch((function(e){n.close()}))},getSettings:function(e){this.activeData=e},resetSettings:function(){this.changeTab()},runCommandByIndex:function(e,t){var n=this,i={};i["es_connect"]=this.$store.state.baseData.EsConnectID,i["index_name"]=t,i["command"]=e,this.loadingGroup[e]=!0,Object(m["b"])(i).then((function(t){0==t.code||200==t.code?(n.$message({type:"success",message:t.msg}),n.search()):n.$message({type:"error",message:t.msg}),n.loadingGroup[e]=!1})).catch((function(t){n.loadingGroup[e]=!1}))},changeTab:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,r,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={},n={},t["es_connect"]=this.$store.state.baseData.EsConnectID,t["index_name"]=this.indexName,e.t0=this.activeName,e.next="Settings"===e.t0?7:"Mapping"===e.t0?12:"Stats"===e.t0?17:"editSettings"===e.t0?22:"alias"===e.t0?30:31;break;case 7:return e.next=9,Object(f["f"])(t);case 9:return n=e.sent,0==n.code&&(this.activeData=JSON.stringify(n.data,null,"\t")),e.abrupt("return");case 12:return e.next=14,Object(v["a"])(t);case 14:return n=e.sent,0==n.code&&(this.activeData=JSON.stringify(n.data["list"][this.indexName].mappings,null,"\t"),0==Object.keys(n.data["list"][this.indexName].mappings).length&&this.$message({type:"error",message:"您还没有设置映射结构"})),e.abrupt("return");case 17:return e.next=19,Object(f["j"])(t);case 19:return n=e.sent,0==n.code&&(this.activeData=JSON.stringify(n.data,null,"\t")),e.abrupt("return");case 22:return e.next=24,Object(f["e"])(t);case 24:for(i=e.sent,a=i.data,r=["creation_date","version","provided_name","uuid","format","number_of_shards"],s=0,o=r;s<o.length;s++)c=o[s],a["index"].hasOwnProperty(c)&&delete a["index"][c];return this.activeData=JSON.stringify(a,null,"\t"),e.abrupt("return");case 30:return e.abrupt("return");case 31:return this.activeData="{}",e.abrupt("return");case 33:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openDrawer:function(e){this.indexName=e,this.changeTab(),this.drawerShow=!0},drawerHandleClose:function(e){this.indexName="",e()},bigNumberTransform:function(e){return g(e)},openSettingDialog:function(e,t){this.indexName=e,this.settingsType=t,this.openSettings=!0},readOnlyAllowDelete:function(){var e=this,t={};t["es_connect"]=this.$store.state.baseData.EsConnectID,this.readOnlyAllowDeleteLoading=!0,Object(m["d"])(t).then((function(t){0==t.code||200==t.code?e.$message({type:"success",message:t.msg}):e.$message({type:"error",message:t.msg}),e.readOnlyAllowDeleteLoading=!1})).catch((function(t){e.readOnlyAllowDeleteLoading=!1}))},querySearch:function(e,t){var n=JSON.parse(JSON.stringify(this.indexTishiList));void 0==e&&(e=""),""!=e.trim()?(n=Object(p["a"])(n,e.trim()),n.length>this.max?t(n.slice(0,this.max)):t(n)):n.length>this.max?t(n.slice(0,this.max)):t(n)},deleteIndex:function(e,t){var n=this;this.$confirm("确定删除该索引吗?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a={},a["es_connect"]=n.$store.state.baseData.EsConnectID,a["index_name"]=e,n.loadingGroup[t]=!0,Object(f["c"])(a).then((function(i){0==i.code||200==i.code?(n.$message({type:"success",message:e+"已删除"}),n.searchData(),n.loadingGroup[t]=!1):(n.$message({type:"error",message:i.msg}),n.loadingGroup[t]=!1)})).catch((function(e){}));case 5:case"end":return i.stop()}}),i)})))).catch((function(e){console.error(e)}))},closeSettings:function(){this.indexName="",this.settingsType="add",this.openSettings=!1},closeMappings:function(){this.indexName="",this.mappingTitle="add",this.openMappings=!1},search:function(){var e=this;this.page=1,this.pageshow=!1,this.searchData(),this.$nextTick((function(){e.pageshow=!0}))},filterData:function(e,t){return Object(p["a"])(e,t)},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.limit=e,this.pageLimit()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.page=e,this.pageLimit()},pageLimit:function(){var e=this;this.list=this.allList.filter((function(t,n){return n<e.page*e.limit&&n>=e.limit*(e.page-1)}))},searchData:function(){var e=this;this.connectLoading=!0;var t={cat:"CatIndices",es_connect:this.$store.state.baseData.EsConnectID};this.indexTishiList=[],Object(m["a"])(t).then((function(t){if(0==t.code){var n=t.data;for(var i in n){var a=n[i];for(var r in a){var s=parseInt(a[r]);isNaN(s)&&(s=a[r]),n[i][r.split(".").join("->")]=s}e.indexTishiList.push({value:a["index"],data:a["index"]})}var o=[];if(""!=e.status.trim()){var c,l=_(n);try{for(l.s();!(c=l.n()).done;){var u=c.value;u["health"]==e.status.trim()&&o.push(u)}}catch(d){l.e(d)}finally{l.f()}}else o=n;o=Object(p["a"])(o,e.input.trim()),e.allList=o,e.total=o.length,e.pageLimit()}else e.$message({type:"error",message:t.msg});e.connectLoading=!1})).catch((function(t){console.log(t),e.connectLoading=!1}))}}},w=y,$=(n("88d2"),n("cba8")),C=Object($["a"])(w,i,a,!1,null,"5f9559d0",null);t["default"]=C.exports},"88d2":function(e,t,n){"use strict";n("0ee8")},b89e:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return g}));var i=n("b775"),a="/api/es_index/";function r(e){return Object(i["a"])({url:a+"CreateAction",method:"post",data:e})}function s(e){return Object(i["a"])({url:a+"GetSettingsAction",method:"post",data:e})}function o(e){return Object(i["a"])({url:a+"IndexNamesAction",method:"post",data:e})}function c(e){return Object(i["a"])({url:a+"ReindexAction",method:"post",data:e})}function l(e){return Object(i["a"])({url:a+"GetAliasAction",method:"post",data:e})}function u(e){return Object(i["a"])({url:a+"DeleteAction",method:"post",data:e})}function d(e){return Object(i["a"])({url:a+"OperateAliasAction",method:"post",data:e})}function p(e){return Object(i["a"])({url:a+"GetSettingsInfoAction",method:"post",data:e})}function m(e){return Object(i["a"])({url:a+"StatsAction",method:"post",data:e})}function g(e){return Object(i["a"])({url:a+"CatStatusAction",method:"post",data:e})}},c236:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("b775"),a="/api/es_map/";function r(e){return Object(i["a"])({url:a+"ListAction",method:"post",data:e})}function s(e){return Object(i["a"])({url:a+"UpdateMappingAction",method:"post",data:e})}},cc06:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d0f2"),n("1bc7"),n("32ea");function i(e,t){var n,i=t.toLowerCase(),a=e;return n=i?a.filter((function(e){return Object.keys(e).some((function(t){return String(e[t]).toLowerCase().match(i)}))})):a,n}},cee7:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u}));var i=n("b775"),a="/api/es/";function r(e){return Object(i["a"])({url:a+"PingAction",method:"post",data:e})}function s(e){return Object(i["a"])({url:a+"CatAction",method:"post",data:e})}function o(e){return Object(i["a"])({url:a+"RunDslAction",method:"post",transformResponse:[function(e){return jsonlint.parse(e)}],data:e})}function c(e){return Object(i["a"])({url:a+"SqlToDslAction",method:"get",params:e})}function l(e){return Object(i["a"])({url:a+"OptimizeAction",method:"post",transformResponse:[function(e){return jsonlint.parse(e)}],data:e})}function u(e){return Object(i["a"])({url:a+"RecoverCanWrite",method:"post",data:e})}},e71d:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("b775"),a="/api/gm_guid";function r(e){return Object(i["a"])({url:a+"/Finish",method:"post",data:e})}function s(e){return Object(i["a"])({url:a+"/IsFinish",method:"post",data:e})}}}]);