(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40711a49","chunk-4a04e0ab"],{"344f":function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return l})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return m})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return d}));var a=n("b775"),r="/api/backUp/";function o(t){return Object(a["a"])({url:r+"SnapshotListAction",method:"post",data:t})}function l(t){return Object(a["a"])({url:r+"SnapshotRepositoryListAction",method:"post",data:t})}function i(t){return Object(a["a"])({url:r+"SnapshotCreateRepositoryAction",method:"post",data:t})}function s(t){return Object(a["a"])({url:r+"SnapshotDeleteRepositoryAction",method:"post",data:t})}function c(t){return Object(a["a"])({url:r+"CleanupeRepositoryAction",method:"post",data:t})}function u(t){return Object(a["a"])({url:r+"CreateSnapshotAction",method:"post",data:t})}function p(t){return Object(a["a"])({url:r+"SnapshotDeleteAction",method:"post",data:t})}function m(t){return Object(a["a"])({url:r+"SnapshotDetailAction",method:"post",data:t})}function f(t){return Object(a["a"])({url:r+"SnapshotRestoreAction",method:"post",data:t})}function d(t){return Object(a["a"])({url:r+"SnapshotStatusAction",method:"post",data:t})}},"596d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.open,title:t.$t("恢复备份")},on:{"update:visible":function(e){t.open=e},close:t.closeDialog}},[n("el-card",{staticClass:"box-card"},[n("el-form",{attrs:{"label-width":"500px","label-position":"left"}},[n("el-form-item",{attrs:{label:t.$t("仓库名")}},[n("el-input",{attrs:{readonly:""},model:{value:t.repository,callback:function(e){t.repository=e},expression:"repository"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("快照名")}},[n("el-input",{attrs:{readonly:""},model:{value:t.snapshot,callback:function(e){t.snapshot=e},expression:"snapshot"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("需要备份的索引")}},[n("index-select",{attrs:{multiple:!0,"have-all":!0,clearable:!0,placeholder:t.$t("迁移别名到多个索引上")},on:{change:t.changeIndex}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("rename_pattern 【正则表达式】")}},[n("el-input",{model:{value:t.form.rename_pattern,callback:function(e){t.$set(t.form,"rename_pattern",e)},expression:"form.rename_pattern"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("rename_replacement 【正则表达式】")}},[n("el-input",{model:{value:t.form.rename_replacement,callback:function(e){t.$set(t.form,"rename_replacement",e)},expression:"form.rename_replacement"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("ignore_unavailable   【把这个选项设置为 true 的时候在创建快照的过程中会忽略不存在的索引,如果没有设置ignore_unavailable，在索引不存在的情况下快照请求将会失败。】")}},[n("el-select",{attrs:{filterable:""},model:{value:t.form.ignore_unavailable,callback:function(e){t.$set(t.form,"ignore_unavailable",e)},expression:"form.ignore_unavailable"}},[n("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),n("el-option",{attrs:{label:t.$t("是"),value:!0}}),t._v(" "),n("el-option",{attrs:{label:t.$t("否"),value:!1}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("include_global_state 【通过设置 include_global_state 为false 能够防止 集群的全局状态被作为快照的一部分存储起来】")}},[n("el-select",{attrs:{filterable:""},model:{value:t.form.include_global_state,callback:function(e){t.$set(t.form,"include_global_state",e)},expression:"form.include_global_state"}},[n("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),n("el-option",{attrs:{label:t.$t("是"),value:!0}}),t._v(" "),n("el-option",{attrs:{label:t.$t("否"),value:!1}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("partial  【如果快照中的1个或多个索引不是全部主分片都可用，就会导致整个创建快照的过程失败。 通过设置 partial 为 true 可以改变这个行为】")}},[n("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.form.partial,callback:function(e){t.$set(t.form,"partial",e)},expression:"form.partial"}},[n("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),n("el-option",{attrs:{label:t.$t("是"),value:!0}}),t._v(" "),n("el-option",{attrs:{label:t.$t("否"),value:!1}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("创建方式")}},[n("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.form.wait,callback:function(e){t.$set(t.form,"wait",e)},expression:"form.wait"}},[n("el-option",{attrs:{label:t.$t("不设置"),value:null}}),t._v(" "),n("el-option",{attrs:{label:t.$t("异步创建"),value:!0}}),t._v(" "),n("el-option",{attrs:{label:t.$t("同步创建"),value:!1}})],1)],1)],1),t._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:t.closeDialog}},[t._v(t._s(t.$t("取消"))+"\n        ")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:t.confirm}},[t._v(t._s(t.$t("确认"))+"\n        ")])],1)],1)],1)],1)},r=[],o=(n("e186"),n("c3ae")),l=n("344f"),i=n("cee7"),s={name:"Add",components:{IndexSelect:function(){return n.e("chunk-6e9d0f88").then(n.bind(null,"1ef5"))}},props:{open:{type:Boolean,default:!1},snapshot:{type:String,default:""},repository:{type:String,default:""}},data:function(){return{isOpen:!1,form:{snapshotName:this.snapshot,repositoryName:this.repository,ignore_unavailable:null,include_global_state:null,partial:null,wait:null,indexList:[],rename_pattern:"",rename_replacement:""}}},computed:{},created:function(){},methods:{changeIndex:function(t){this.form.indexList=[],this.form.indexList=t},closeDialog:function(){this.$emit("close",!1)},confirm:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form,e["es_connect"]=this.$store.state.baseData.EsConnectID,t.next=4,Object(l["i"])(e);case 4:if(n=t.sent,a=n.code,n.data,r=n.msg,0!=a){t.next=12;break}return this.$emit("close",!0),this.$message({type:"success",message:r}),t.abrupt("return");case 12:-1!==r.indexOf(" with same name already exists ")?this.$confirm("错误信息:【"+r+"】,是否先关闭所有索引再进行恢复快照?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e["es_connect"]=s.$store.state.baseData.EsConnectID,e["index_name"]="*",e["command"]="close",t.next=6,Object(i["b"])(e);case 6:if(n=t.sent,0==n.code){t.next=10;break}return s.$message({type:"error",message:r}),t.abrupt("return");case 10:s.confirm();case 11:case"end":return t.stop()}}),t)})))).catch((function(t){console.error(t)})):this.$message({type:"error",message:r});case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},c=s,u=n("cba8"),p=Object(u["a"])(c,a,r,!1,null,"4c239983",null);e["default"]=p.exports},cee7:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return u}));var a=n("b775"),r="/api/es/";function o(t){return Object(a["a"])({url:r+"PingAction",method:"post",data:t})}function l(t){return Object(a["a"])({url:r+"CatAction",method:"post",data:t})}function i(t){return Object(a["a"])({url:r+"RunDslAction",method:"post",transformResponse:[function(t){return jsonlint.parse(t)}],data:t})}function s(t){return Object(a["a"])({url:r+"SqlToDslAction",method:"get",params:t})}function c(t){return Object(a["a"])({url:r+"OptimizeAction",method:"post",transformResponse:[function(t){return jsonlint.parse(t)}],data:t})}function u(t){return Object(a["a"])({url:r+"RecoverCanWrite",method:"post",data:t})}}}]);