(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c80bf"],{"52e1":function(e,t,a){"use strict";a.r(t);var l,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.open,title:e.$t("创建快照")},on:{"update:visible":function(t){e.open=t},close:e.closeDialog}},[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{"label-width":"500px","label-position":"left"}},[a("el-form-item",{attrs:{label:e.$t("存储库")}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("请选择存储库")},model:{value:e.form.repositoryName,callback:function(t){e.$set(e.form,"repositoryName",t)},expression:"form.repositoryName"}},e._l(e.repositoryNameList,(function(e,t,l){return a("el-option",{key:l,attrs:{label:t,value:t}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("快照名")}},[a("el-input",{attrs:{placeholder:e.$t("快照名")},model:{value:e.form.snapshotName,callback:function(t){e.$set(e.form,"snapshotName",t)},expression:"form.snapshotName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("需要备份的索引")}},[a("index-select",{attrs:{multiple:!0,"have-all":!0,clearable:!0,placeholder:e.$t("迁移别名到多个索引上")},on:{change:e.changeIndex}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("ignore_unavailable   【把这个选项设置为 true 的时候在创建快照的过程中会忽略不存在的索引,如果没有设置ignore_unavailable，在索引不存在的情况下快照请求将会失败。】")}},[a("el-select",{attrs:{filterable:""},model:{value:e.form.ignore_unavailable,callback:function(t){e.$set(e.form,"ignore_unavailable",t)},expression:"form.ignore_unavailable"}},[a("el-option",{attrs:{label:e.$t("不设置"),value:null}}),e._v(" "),a("el-option",{attrs:{label:e.$t("是"),value:!0}}),e._v(" "),a("el-option",{attrs:{label:e.$t("否"),value:!1}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("include_global_state 【通过设置 include_global_state 为false 能够防止 集群的全局状态被作为快照的一部分存储起来】")}},[a("el-select",{attrs:{filterable:""},model:{value:e.form.include_global_state,callback:function(t){e.$set(e.form,"include_global_state",t)},expression:"form.include_global_state"}},[a("el-option",{attrs:{label:e.$t("不设置"),value:null}}),e._v(" "),a("el-option",{attrs:{label:e.$t("是"),value:!0}}),e._v(" "),a("el-option",{attrs:{label:e.$t("否"),value:!1}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("partial  【如果快照中的1个或多个索引不是全部主分片都可用，就会导致整个创建快照的过程失败。 通过设置 partial 为 true 可以改变这个行为】")}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.form.partial,callback:function(t){e.$set(e.form,"partial",t)},expression:"form.partial"}},[a("el-option",{attrs:{label:e.$t("不设置"),value:null}}),e._v(" "),a("el-option",{attrs:{label:e.$t("是"),value:!0}}),e._v(" "),a("el-option",{attrs:{label:e.$t("否"),value:!1}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("创建方式")}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.form.wait,callback:function(t){e.$set(e.form,"wait",t)},expression:"form.wait"}},[a("el-option",{attrs:{label:e.$t("不设置"),value:null}}),e._v(" "),a("el-option",{attrs:{label:e.$t("异步创建"),value:!0}}),e._v(" "),a("el-option",{attrs:{label:e.$t("同步创建"),value:!1}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:e.closeDialog}},[e._v(e._s(e.$t("取消"))+"\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:e.confirm}},[e._v(e._s(e.$t("确认"))+"\n        ")])],1)],1)],1)],1)},n=[],o=a("1554"),s=(a("e186"),a("c3ae")),i=a("344f"),c=(l={name:"Add",components:{}},Object(o["a"])(l,"components",{IndexSelect:function(){return a.e("chunk-6e9d0f88").then(a.bind(null,"1ef5"))}}),Object(o["a"])(l,"props",{open:{type:Boolean,default:!1},snapshotData:{type:Object,default:null}}),Object(o["a"])(l,"data",(function(){return{isOpen:!1,form:{snapshotName:"",repositoryName:"",indexList:[],ignore_unavailable:null,include_global_state:null,partial:null,wait:null},repositoryNameList:{}}})),Object(o["a"])(l,"computed",{}),Object(o["a"])(l,"created",(function(){this.initRepositoryName()})),Object(o["a"])(l,"methods",{changeIndex:function(e){console.log(e),this.form.indexList=[],this.form.indexList=e},initRepositoryName:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,l,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t={},t["es_connect"]=this.$store.state.baseData.EsConnectID,e.next=5,Object(i["h"])(t);case 5:if(a=e.sent,l=a.data,r=a.code,n=a.msg,0!=r){e.next=13;break}this.repositoryNameList=l.res,e.next=20;break;case 13:if(199999!=r){e.next=18;break}return this.$notify({title:"Error",dangerouslyUseHTMLString:!0,message:'\n<strong>\n            <i style="color: orange">path.repo没有设置</i><br>\n<i>在elasticsearch.yml 配置文件中配置仓库base目录</i><br>\n<i>添加path.repo: /tmp/tmp (/tmp/tmp 为快照备份所在文件夹, <br><i style="color: orange">注意</i>首先要先创建这个文件夹)</i>\n\n          ',type:"error"}),e.abrupt("return");case 18:return this.$message({type:"error",message:n}),e.abrupt("return");case 20:this.loading=!1;case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("close",!1)},confirm:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.form,t["es_connect"]=this.$store.state.baseData.EsConnectID,e.next=4,Object(i["b"])(t);case 4:if(a=e.sent,l=a.code,a.data,r=a.msg,0!=l){e.next=14;break}return this.$emit("close",!0),this.$message({type:"success",message:r}),e.abrupt("return");case 14:return this.$message({type:"error",message:r}),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),l),u=c,p=a("cba8"),m=Object(p["a"])(u,r,n,!1,null,"fd60c884",null);t["default"]=m.exports}}]);