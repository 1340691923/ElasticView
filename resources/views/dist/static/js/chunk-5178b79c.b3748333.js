(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5178b79c"],{5289:function(e,t,n){"use strict";n("6b6f")("link",(function(e){return function(t){return e(this,"a","href",t)}}))},"6b6f":function(e,t,n){var i=n("e99b"),r=n("0926"),a=n("3ab0"),s=/"/g,o=function(e,t,n,i){var r=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(o),i(i.P+i.F*r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},"74bb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddRole}},[e._v(e._s(e.$t("新建连接信息"))+"\n    ")])],1),e._v(" "),n("back-to-top"),e._v(" "),n("el-table",{attrs:{data:e.list}},[n("el-table-column",{attrs:{label:e.$t("序号"),align:"center",fixed:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("HOST"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.ip)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("用户名"),width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.user)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("备注"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.remark)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("版本"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.version)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("创建时间"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.created)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("修改时间"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.updated)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("操作"),fixed:"right",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.row.connectLoading,expression:"scope.row.connectLoading"}],attrs:{disabled:t.row.connectLoading,type:"success",size:"mini",icon:"el-icon-link"},on:{click:function(n){return e.testConnect(t)}}},[e._v(e._s(e.$t("测试连接"))+"\n        ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t)}}},[e._v(e._s(e.$t("编辑"))+"\n        ")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t)}}},[e._v(e._s(e.$t("删除"))+"\n        ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogVisible,title:"edit"===e.dialogType?e.$t("编辑连接信息"):e.$t("新建连接信息")},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.link,"label-width":"100px","label-position":"left"}},[n("el-form-item",{attrs:{label:e.$t("IP")}},[n("el-input",{attrs:{placeholder:e.$t("例如:http://127.0.0.1:9200")},model:{value:e.link.ip,callback:function(t){e.$set(e.link,"ip",t)},expression:"link.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("用户名")}},[n("el-autocomplete",{attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:e.$t("用户名")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.value))])]}}]),model:{value:e.link.user,callback:function(t){e.$set(e.link,"user",t)},expression:"link.user"}},[n("i",{staticClass:"el-icon-user",attrs:{slot:"suffix"},slot:"suffix"})])],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("密码")}},[n("el-input",{attrs:{clearable:"",placeholder:e.$t("密码")},model:{value:e.link.pwd,callback:function(t){e.$set(e.link,"pwd",t)},expression:"link.pwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("备注")}},[n("el-input",{attrs:{clearable:"",placeholder:e.$t("备注")},model:{value:e.link.remark,callback:function(t){e.$set(e.link,"remark",t)},expression:"link.remark"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("版本")}},[n("el-select",{attrs:{placeholder:e.$t("请选择版本"),filterable:""},model:{value:e.link.version,callback:function(t){e.$set(e.link,"version",t)},expression:"link.version"}},[n("el-option",{attrs:{label:"6",value:Number(6)}}),e._v(" "),n("el-option",{attrs:{label:"7",value:Number(7)}}),e._v(" "),n("el-option",{attrs:{label:"8",value:Number(8)}})],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.testConnectLoading,expression:"testConnectLoading"}],attrs:{size:"mini",disabled:e.testConnectLoading,type:"success",icon:"el-icon-link"},on:{click:e.testConnectForm}},[e._v(e._s(e.$t("测试连接"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:e.confirm}},[e._v(e._s(e.$t("确认"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("取消"))+"\n      ")])],1)],1)],1)},r=[],a=(n("e186"),n("c3ae")),s=(n("5289"),n("ed08")),o=n("eb9d"),c=n("cee7"),l=(n("cc06"),{created:"",id:0,ip:"http://127.0.0.1:9200",pwd:"",remark:"",updated:"",user:"",version:6}),u={components:{BackToTop:function(){return n.e("chunk-60a93920").then(n.bind(null,"0625"))}},data:function(){return{usernameWord:[{value:"elastic"}],testConnectLoading:!1,connectLoading:!1,link:Object.assign({},l),list:[],dialogVisible:!1,dialogType:"new",checkStrictly:!1,defaultProps:{children:"children",label:"title"}}},computed:{},created:function(){this.getList()},methods:{querySearch:function(e,t){var n=this.usernameWord,i=e?n.filter(this.createFilter(e)):n;t(i)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},testConnectForm:function(){var e=this;this.testConnectLoading=!0,Object(c["c"])(this.link).then((function(t){0==t.code?e.$message({type:"success",message:"连接成功,ES版本为 :".concat(t.data.version.number)}):e.$message({type:"error",message:t.msg}),e.testConnectLoading=!1})).catch((function(t){e.testConnectLoading=!1}))},testConnect:function(e){var t=this;this.list[e.$index].connectLoading=!0,Object(c["c"])(e.row).then((function(n){0==n.code?(console.log("res",n),t.$message({type:"success",message:"连接成功,ES版本为 :".concat(n.data.version.number)})):t.$message({type:"error",message:n.msg}),t.list[e.$index].connectLoading=!1})).catch((function(n){t.list[e.$index].connectLoading=!1}))},getList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])();case 2:for(n in t=e.sent,t.data)t.data[n]["connectLoading"]=!1;this.list=t.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddRole:function(){this.link=Object.assign({},l),this.dialogType="new",this.dialogVisible=!0},handleEdit:function(e){this.dialogType="edit",this.dialogVisible=!0,this.checkStrictly=!0,this.link=Object(s["c"])(e.row),this.link.pwd=""},handleDelete:function(e){var t=this,n=e.$index,i=e.row;this.$confirm("确定删除该连接信息吗?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])({id:i.id});case 2:if(r=e.sent,0==r.code){e.next=6;break}return t.$message({type:"error",message:r.msg}),e.abrupt("return");case 6:t.list.splice(n,1),t.$message({type:"success",message:"Delete succed!"});case 8:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},confirm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.link.remark){e.next=3;break}return this.$message({type:"error",message:"请填写备注"}),e.abrupt("return");case 3:if(t="edit"===this.dialogType,!t){e.next=14;break}return e.next=7,Object(o["e"])(this.link);case 7:if(n=e.sent,0==n.code){e.next=11;break}return this.$message({type:"error",message:n.msg}),e.abrupt("return");case 11:this.getList(),e.next=21;break;case 14:return e.next=16,Object(o["b"])(this.link);case 16:if(i=e.sent,0==i.code){e.next=20;break}return this.$message({type:"error",message:i.msg}),e.abrupt("return");case 20:this.getList();case 21:this.dialogVisible=!1,this.$message({type:"success",message:t?"修改成功":"创建成功"});case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=u,f=(n("eb42"),n("cba8")),p=Object(f["a"])(d,i,r,!1,null,"13d7e4d6",null);t["default"]=p.exports},cc06:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d0f2"),n("1bc7"),n("32ea");function i(e,t){var n,i=t.toLowerCase(),r=e;return n=i?r.filter((function(e){return Object.keys(e).some((function(t){return String(e[t]).toLowerCase().match(i)}))})):r,n}},cee7:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u}));var i=n("b775"),r="/api/es/";function a(e){return Object(i["a"])({url:r+"PingAction",method:"post",data:e})}function s(e){return Object(i["a"])({url:r+"CatAction",method:"post",data:e})}function o(e){return Object(i["a"])({url:r+"RunDslAction",method:"post",transformResponse:[function(e){return jsonlint.parse(e)}],data:e})}function c(e){return Object(i["a"])({url:r+"SqlToDslAction",method:"get",params:e})}function l(e){return Object(i["a"])({url:r+"OptimizeAction",method:"post",transformResponse:[function(e){return jsonlint.parse(e)}],data:e})}function u(e){return Object(i["a"])({url:r+"RecoverCanWrite",method:"post",data:e})}},eb42:function(e,t,n){"use strict";n("f2d7")},f2d7:function(e,t,n){}}]);